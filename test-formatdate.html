<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Phase 2.1 - formatDate() é‡æ„æµ‹è¯•</title>
</head>
<body>
    <h1>ğŸ§ª formatDate() é‡æ„åŠŸèƒ½æµ‹è¯•</h1>
    <div id="test-results"></div>

    <!-- åŠ è½½ä¾èµ– -->
    <script src="public/js/modules/supplier/services/supplier-services.js?v=3.2.1"></script>
    <script src="public/js/modules/supplier.js"></script>

    <script>
        // æµ‹è¯•å‡½æ•°
        function testFormatDate() {
            const results = [];
            const resultsDiv = document.getElementById('test-results');

            // æµ‹è¯•ç”¨ä¾‹
            const testCases = [
                { input: '2025-12-06T00:00:00.000Z', expected: '2025-12-06' },
                { input: 'æ°¸ä¹…', expected: 'æ°¸ä¹…' },
                { input: 'æ°¸ä¹…æœ‰æ•ˆ', expected: 'æ°¸ä¹…æœ‰æ•ˆ' },
                { input: '', expected: '' },
                { input: null, expected: null },
                { input: 'invalid-date', expected: 'invalid-date' }
            ];

            // æµ‹è¯•æœåŠ¡å±‚æ–¹æ³•
            results.push('<h2>ğŸ”§ æœåŠ¡å±‚æµ‹è¯• (supplierServices.formatDate)</h2>');
            testCases.forEach(testCase => {
                try {
                    const result = window.supplierServices.formatDate(testCase.input);
                    const passed = result === testCase.expected;
                    results.push(`
                        <div style="color: ${passed ? 'green' : 'red'}">
                            ${passed ? 'âœ…' : 'âŒ'} è¾“å…¥: ${testCase.input} â†’ è¾“å‡º: ${result} (æœŸæœ›: ${testCase.expected})
                        </div>
                    `);
                } catch (error) {
                    results.push(`<div style="color: red">âŒ è¾“å…¥: ${testCase.input} â†’ é”™è¯¯: ${error.message}</div>`);
                }
            });

            // æµ‹è¯•é‡æ„åçš„ä¸»ç±»æ–¹æ³•
            results.push('<h2>ğŸ”„ é‡æ„åä¸»ç±»æµ‹è¯• (supplierManager.formatDate)</h2>');

            // ç­‰å¾…ä¸»ç±»åˆå§‹åŒ–
            setTimeout(() => {
                if (window.supplierManager) {
                    testCases.forEach(testCase => {
                        try {
                            const result = window.supplierManager.formatDate(testCase.input);
                            const passed = result === testCase.expected;
                            results.push(`
                                <div style="color: ${passed ? 'green' : 'red'}">
                                    ${passed ? 'âœ…' : 'âŒ'} è¾“å…¥: ${testCase.input} â†’ è¾“å‡º: ${result} (æœŸæœ›: ${testCase.expected})
                                </div>
                            `);
                        } catch (error) {
                            results.push(`<div style="color: red">âŒ è¾“å…¥: ${testCase.input} â†’ é”™è¯¯: ${error.message}</div>`);
                        }
                    });
                } else {
                    results.push('<div style="color: orange">âš ï¸ supplierManager æœªåˆå§‹åŒ–</div>');
                }

                resultsDiv.innerHTML = results.join('');
            }, 1000);
        }

        // é¡µé¢åŠ è½½åæ‰§è¡Œæµ‹è¯•
        window.onload = testFormatDate;
    </script>
</body>
</html>