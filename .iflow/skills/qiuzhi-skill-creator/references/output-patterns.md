# 输出模式参考

本文档提供 Skill 中常用的输出格式设计模式。

## 目录

- [模板模式](#模板模式)
- [示例模式](#示例模式)
- [渐进式披露模式](#渐进式披露模式)
- [交互确认模式](#交互确认模式)

---

## 模板模式

为输出格式提供模板，根据需求调整严格程度。

### 严格模板 (API响应、数据格式)

```markdown
## 报告结构

**必须**使用以下模板结构:

# [分析标题]

## 执行摘要
[关键发现的一段式概述]

## 关键发现
- 发现 1 及支持数据
- 发现 2 及支持数据
- 发现 3 及支持数据

## 建议
1. 具体可执行的建议
2. 具体可执行的建议
```

### 灵活模板 (允许适应性调整)

```markdown
## 报告结构

以下是合理的默认格式，但请根据实际情况调整:

# [分析标题]

## 执行摘要
[概述]

## 关键发现
[根据发现内容调整章节]

## 建议
[根据具体情况定制]

根据分析类型适当调整章节。
```

---

## 示例模式

当输出质量依赖于示例时，提供输入/输出对。

### 提交信息示例

```markdown
## 提交信息格式

按以下示例生成提交信息:

**示例 1:**
输入: 添加了 JWT 令牌的用户认证
输出:
```
feat(auth): 实现基于 JWT 的认证

添加登录端点和令牌验证中间件
```

**示例 2:**
输入: 修复了报告中日期显示不正确的问题
输出:
```
fix(reports): 修正时区转换中的日期格式

在报告生成中统一使用 UTC 时间戳
```

遵循此风格: type(scope): 简短描述，然后详细说明。
```

### 代码风格示例

```markdown
## 函数命名示例

**好的命名:**
- `getUserById` - 动词 + 名词 + 条件
- `validateEmail` - 动词 + 名词
- `isAuthenticated` - is + 形容词 (布尔值)

**避免的命名:**
- `data` - 太模糊
- `doStuff` - 不描述功能
- `handleClick123` - 包含无意义数字
```

---

## 渐进式披露模式

控制信息展示的层次和时机。

### 摘要优先模式

```markdown
## 分析结果

### 快速摘要
✅ 3 个文件处理成功
⚠️ 1 个文件需要注意
❌ 0 个文件失败

### 详细结果
[仅在用户请求时展开]
```

### 分层详情模式

```markdown
## API 响应

**基本信息:**
- 状态: 成功
- 处理时间: 1.2s

**详细数据:** (展开查看)
[详细 JSON 数据]

**调试信息:** (仅开发模式)
[请求/响应日志]
```

---

## 交互确认模式

在关键输出点使用 `AskUserQuestion` 确认。

### 输出预览确认

```
问题: "以下是生成的内容预览，是否满意？"
选项:
- "满意，保存文件"
- "需要修改 (请说明哪里)"
- "重新生成"
```

### 格式选择确认

```
问题: "输出格式选择？"
选项:
- "Markdown 格式"
- "JSON 格式"
- "纯文本格式"
- "其他格式 (请说明)"
```

### 质量等级确认

```
问题: "输出详细程度？"
选项:
- "简洁版 - 只要关键信息"
- "标准版 - 平衡详细和简洁"
- "详细版 - 包含所有细节"
```

---

## 错误输出模式

### 友好错误信息

```markdown
## 错误处理输出格式

**用户友好格式:**
❌ 无法处理文件 "report.pdf"

**原因:** 文件已损坏或格式不支持
**建议:**
1. 确认文件可以正常打开
2. 尝试重新导出 PDF
3. 使用其他 PDF 阅读器验证

**技术详情:** (可选展开)
Error: PDF header not found at offset 0
```

### 批量处理结果

```markdown
## 批量处理结果

处理完成: 10/12 文件

| 文件名 | 状态 | 备注 |
|--------|------|------|
| doc1.pdf | ✅ 成功 | - |
| doc2.pdf | ✅ 成功 | - |
| doc3.pdf | ⚠️ 警告 | 部分内容无法提取 |
| doc4.pdf | ❌ 失败 | 文件损坏 |

**下一步操作?**
使用 `AskUserQuestion`:
- "继续处理失败的文件"
- "忽略失败，导出成功结果"
- "查看详细错误日志"
```

---

## 最佳实践

1. **一致性**: 同类输出使用相同格式
2. **可扫描性**: 使用标题、列表、表格便于快速浏览
3. **渐进详情**: 先展示摘要，详情按需展开
4. **交互确认**: 关键输出前询问用户偏好
5. **错误友好**: 错误信息包含原因和解决建议
