# Systematic Debugging Command

## 命令名称
`/debug` 或 `/systematic-debugging`

## 描述
系统化调试，使用 4 阶段根因分析过程快速定位和解决问题。

## 触发条件
当遇到：
- Bug
- 测试失败
- 意外行为
- 错误信息
- 性能问题

## 4 阶段根因分析流程

### 阶段 1: 问题定义
1. **明确问题**：确切地描述问题是什么
2. **收集证据**：错误信息、日志、截图
3. **确定范围**：影响哪些功能、用户、环境
4. **建立基线**：问题何时开始发生

### 阶段 2: 假设生成
1. **头脑风暴**：列出所有可能的原因
2. **优先排序**：根据可能性和影响排序
3. **制定测试计划**：如何验证每个假设
4. **选择最佳假设**：从最可能的开始

### 阶段 3: 假设验证
1. **隔离变量**：一次只测试一个假设
2. **收集数据**：运行测试、添加日志、使用调试器
3. **分析结果**：数据支持或反驳假设
4. **迭代**：如果假设错误，返回阶段 2

### 阶段 4: 根因确认
1. **验证修复**：实施修复并验证问题解决
2. **回归测试**：确保没有引入新问题
3. **文档化**：记录根因和解决方案
4. **预防措施**：如何防止问题再次发生

## 调试技巧

### 根因追踪
- 使用日志记录关键路径
- 添加断点和观察点
- 使用调试器逐步执行
- 检查变量状态

### 防御性编程
- 添加输入验证
- 使用断言
- 错误处理和日志
- 边界条件检查

### 条件等待
- 对于异步问题，使用适当的等待策略
- 避免硬编码等待时间
- 使用轮询或事件驱动方法

## 验证原则
- **不要猜测**：基于证据而非直觉
- **一次一个**：一次只改变一个变量
- **可重复**：确保问题可以重现
- **隔离环境**：在受控环境中测试

## 技能调用
自动调用 `systematic-debugging` 技能

## 输出
- 问题分析报告
- 根因分析
- 修复方案
- 测试验证结果
- 预防措施文档

## 示例
```
/debug
帮我调试这个登录失败的问题
```

## 注意事项
- 不要跳过任何阶段
- 基于证据而非假设
- 记录所有发现
- 验证修复是否真正解决问题
- 考虑副作用和回归风险