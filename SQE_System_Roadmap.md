# SQE 供应商管理系统 v2.0 改版计划清单

**最新更新**: 2025-11-22 | **整体进度**: Phase 1 完成 (⭐⭐⭐⭐⭐ 5/5) | Phase 1.5 进行中

---

## 📌 状态标识说明

**任务状态**: ✅ 已完成 | 🟡 进行中 | ⬜ 未开始  
**优先级**: 🔴 高优先级 | 🟡 中优先级 | 🟢 低优先级

---

## 📊 项目进度概览

| Phase | 名称 | 状态 | 完成度 | 备注 |
|-------|------|------|--------|------|
| **Phase 1** | 架构设计与基础重构 | ✅ 已完成 | 100% | 核心架构完成，IQC 模块重构完成 |
| **Phase 1.5** | 桌面端环境搭建 | 🟡 进行中 | 60% | Electron 启动器就绪，待打包测试 |
| **Phase 2** | 供应商档案与预警 | ⬜ 未开始 | 0% | 依赖 Phase 1 完成 |
| **Phase 3** | 绩效评价与高级功能 | ⬜ 未开始 | 0% | 依赖 Phase 2 完成 |

---

## 1. 产品定位与核心目标 (Product Vision)

打造一款**专业、智能、自动化**的 SQE 供应商全生命周期管理系统。
从单一的 IQC 数据分析工具，转型为集**档案管理、资质预警、绩效评价、自动交互**于一体的企业级质量管理平台。

**核心关键词**：
*   **专业性 (Professional)**：符合 ISO9001/IATF16949 质量管理体系要求。
*   **智能化 (Intelligent)**：自动预警、自动邮件、智能评分。
*   **高级感 (Premium)**：现代化的 UI/UX 设计，操作流畅，视觉愉悦。

---

## 2. UI/UX 设计系统 (Design System)

### 实际采用方案 (2025-11-21 更新)

**配色方案**: Mocha Mousse (摩卡慕斯) - Pantone 2025 年度色
*   **主色系**：
    *   `--primary-500: #9d7a54` (摩卡棕)
    *   `--primary-700: #6b4e3d` (深棕)
    *   `--primary-900: #4d392f` (最深棕)
*   **强调色**：活力橙 `#ff6b35`
*   **语义色**：
    *   成功/优秀：翡翠绿 `#10b981`
    *   警告/临期：琥珀黄 `#f59e0b`
    *   危险/过期：珊瑚红 `#ef4444`
    *   信息：蓝色 `#3b82f6`

**布局系统**:
*   ✅ 侧边栏 + 内容区（已完成）
*   ✅ SPA 单页应用架构（Hash 路由）
*   ✅ 响应式设计（1024px、768px 断点）

**交互组件**:
*   ✅ 卡片式设计
*   ✅ 悬浮效果与微动效
*   ✅ Toast 通知（已实现，替代 alert）
*   ❌ Modal 模态框（待开发）
*   ❌ 骨架屏（待开发）

---

## 3. 详细实施进度表 (Implementation Progress Tracker)

> **说明**：此表为项目推进的"活文档"。

### Phase 1: 架构设计与基础重构 (Architecture Design & Foundation Refactor)

**最新核实时间**: 2025-11-22 | **整体完成度**: ⭐⭐⭐⭐⭐ (5/5) | **状态**: ✅ 已完成

| 任务ID | 任务名称 | 声称状态 | 实际状态 | 验证结果 | 详细描述 | 备注 |
| :---: | :--- | :---: | :---: | :---: | :--- | :--- |
| **1.0** | **模块化架构设计** | ✅ 已完成 | ✅ **已完成** | ✅ **正确** | 确立模块化原则，创建目录结构，制定BEM命名规范，提取共享组件 | 目录结构已建立，模块化原则已确立 |
| **1.0.1** | **目录结构建立** | ✅ 已完成 | ✅ **已完成** | ✅ **正确** | 创建 `public/js/modules/`, `public/css/modules/`, `public/js/utils/` 目录 | 三个核心目录全部创建，文件组织清晰 |
| **1.0.2** | **代码强制分离** | ✅ 已完成 | ✅ **已完成** | ✅ **正确** | 现有代码(IQC/供应商等)必须完全重构为独立模块，禁止混合编写 | iqc.js 独立，main.js 重构完成，模块边界清晰 |
| **1.0.2.1** | **main.js 重构** | ✅ 已完成 | ✅ **已完成** | ✅ **正确** | 删除 `main.js` 中与 `iqc.js` 重复的业务逻辑，确保单一职责 | main.js 已重命名为 main.js.backup，业务逻辑完全迁移 |

### Phase 3: 绩效评价与高级功能 (Performance & Advanced)

| 任务ID | 任务名称 | 声称状态 | 实际状态 | 验证结果 | 详细描述 | 备注 |
| :---: | :--- | :---: | :---: | :---: | :--- | :--- |

为了避免系统复杂度增加导致"牵一发而动全身"的问题，严格遵循以下原则：

**核心原则**:
*   **独立性 (Independence)**：每个业务模块（IQC、供应商档案、绩效、审核）应视为独立的子系统，拥有独立的代码空间。
*   **解耦 (Decoupling)**：修改一个模块的 UI 或逻辑，绝不应影响其他模块的运行。

**实施规范**:
1.  **独立 JS 文件**：
    *   严禁将所有逻辑堆砌在 `main.js` 或 `ui.js` 中。
    *   每个模块必须有独立的控制器文件，例如：
        *   `public/js/modules/iqc.js` (负责 IQC 分析逻辑)
        *   `public/js/modules/supplier.js` (负责供应商档案逻辑)
        *   `public/js/modules/performance.js` (负责绩效评价逻辑)
2.  **独立 CSS 或命名空间**：
    *   每个模块的样式应独立文件（如 `public/css/modules/iqc_v2.css`）。
    *   或者在 `style.css` 中使用严格的 BEM 命名空间（如 `.iqc-container__chart`, `.supplier-card__title`）。
3.  **共享组件提取**：
    *   通用功能（API 请求封装、Loading 动画、模态框基类、工具函数）提取到 `public/js/utils/` 目录。
4.  **重构阈值**：
    *   当单文件超过 500 行，或包含 >2 个业务模块逻辑时，强制触发拆分重构。

---

## 7. 桌面端迁移策略 (Desktop Application Strategy)

**好消息**：现有的技术栈 (Node.js + HTML/CSS/JS) 转换成桌面端非常方便，几乎是无缝衔接。

我们将使用 **Electron** 框架来实现这一目标。

### 为什么选择 Electron？

1.  **代码复用率 99%**：Electron 的核心就是 Chromium 浏览器 + Node.js。我们现在写的 HTML/CSS/JS 前端代码可以直接在 Electron 中运行，无需重写。
2.  **原生能力**：Electron 可以让网页调用 Windows 系统底层能力，比如：
    *   **文件系统**：直接读取本地 Excel，不再需要"上传"这个动作，体验更像原生软件。
    *   **系统通知**：直接弹出 Windows 右下角通知，而不仅仅是网页弹窗。
    *   **开机自启**：可以设置为开机自动后台运行，默默监控证书过期情况。
3.  **离线运行**：数据库 (SQLite) 本地化后，软件可以在无网络环境下（内网）完美运行。

### 迁移步骤预览

1.  **安装 Electron**：`npm install electron --save-dev` ✅ 已完成
2.  **配置入口**：创建一个 `electron-main.js` (Electron 主进程)，负责创建窗口并加载我们的 `index.html`。
3.  **调整 API 调用**：
    *   目前的 API 是通过 HTTP 请求 (`fetch('/api/...')`) 调用后端。
    *   在 Electron 中，我们可以保留 HTTP 模式（在本地启动一个微型服务器），也可以使用 **IPC (进程间通信)** 直接调用控制器函数，后者性能更好且无需占用端口。
4.  **打包发布**：使用 `electron-builder` 将项目打包成 `.exe` 安装包，支持自定义图标、安装向导等。

**结论**：我们现在所做的每一步 Web 开发工作，都是在为未来的桌面端打基础。**现在的代码完全不会浪费**，未来只需加一层"壳"即可华丽转身为桌面软件。

---

**文档维护**: 本文档将持续更新，记录项目进度和重要决策。
**最后更新**: 2025-11-22