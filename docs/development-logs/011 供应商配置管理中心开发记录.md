# 供应商配置管理中心开发记录

## 📝 开发规范要求（给后续AI的指令）必须阅读完1-60行！

**⚠️ 重要规范（2026-01-05制定）：**
> 在供应商配置中心开发过程中，严格遵守KISS、YAGNI、DRY原则，每一个关键步骤（包括需求分析、设计决策、代码实现、测试验证、问题修复等）需要记录到[模块名]（中文）开发记录.md的 Markdown 文件。该文件应包含：
> - 模块目标
> - 设计思路与技术选型理由
> - 实现步骤（按时间顺序）
> - 关键代码片段（带注释）
> - 遇到的问题及解决方案
> - 待办事项（TODO）
> - 最终验证结果
>
> **触发条件：每次输出新内容后，请同时提供该Markdown文件的最新完整版本，或明确指出需要追加/修改的部分。**
> **记录范围：上次提交后至本次提交**

**📋 记录模板要求：**
```markdown
### 📅 [日期] [时间] - [阶段标题]
**策划者：** [开发者名称]
**阶段目标：** [本阶段要达成的目标]

**做了什么：**
- [具体操作1]
- [具体操作2]
- [具体操作3]

**关键决策：**
- [决策1及理由]
- [决策2及理由]

**代码片段：**
```javascript
// 代码示例
const example = '代码记录';
```

**遇到的问题：**
- **问题描述：** [具体问题]
- **解决方案：** [解决方法]
- **结果：** [解决效果]

**验证结果：**
- [ ] 功能测试通过
- [ ] 界面显示正常
- [ ] 错误处理正确

**待办事项：**
- [ ] 后续要完成的任务1
- [ ] 后续要完成的任务2

---
```

**🔒 强制要求：**
- **不能删减之前内容** - **每次更新都要追加到文段后面**
- **必须使用时间戳格式：📅 [日期] [时间]**
- **严格按照模板格式记录**

---

### 📅 2026-01-05 15:00 - 阶段1：创建供应商配置中心
**策划者：** iFlow CLI
**阶段目标：** 创建供应商配置中心，实现供应商统一管理

**做了什么：**
- 创建数据库迁移脚本 `server/migrations/create_vendor_config.js`
- 创建数据模型 `server/models/VendorConfig.js`
- 创建供应商同步服务 `server/services/vendor-sync-service.js`
- 创建配置中心API路由 `server/routes/vendors.js`
- 修改 `server/index.js` 注册vendors路由
- 修改 `server/database/config.js` 加载VendorConfig模型
- 修改 `public/index.html` 添加配置中心模块
- 创建前端JS文件（3个）：
  - `vendor-config-services.js` - 服务层
  - `vendor-config-ui-utils.js` - UI工具层
  - `vendor-config.js` - 主管理器
- 创建CSS文件（6个）：
  - `vendor-config-components.css` - 组件样式
  - `vendor-config-layout.css` - 布局样式
  - `vendor-config-interactions.css` - 交互样式
  - `vendor-config-modals.css` - 模态框样式
  - `vendor-config-font-hierarchy.css` - 字体层级
  - `vendor-config-filter.css` - 筛选界面
- 执行数据库迁移脚本

**关键决策：**
- 使用vendor-前缀避免与supplier模块冲突
- 采用三层架构（service层、UI工具层、控制层）
- CSS拆分为6个文件遵循单一职责原则
- 使用BEM命名规范
- 采用"配置中心统一管理"策略，VendorConfig表作为唯一数据源

**代码片段：**
```javascript
// vendor_config表结构
CREATE TABLE vendor_config (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    supplier_name VARCHAR(255) NOT NULL UNIQUE,
    source VARCHAR(50) DEFAULT 'IQC',
    enable_document_mgmt BOOLEAN DEFAULT 0,
    enable_performance_mgmt BOOLEAN DEFAULT 0,
    status VARCHAR(20) DEFAULT 'Active',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

// 创建索引优化查询性能
CREATE INDEX idx_vendor_config_supplier_name ON vendor_config(supplier_name);
CREATE INDEX idx_vendor_config_source ON vendor_config(source);
CREATE INDEX idx_vendor_config_status ON vendor_config(status);
CREATE INDEX idx_vendor_config_enable_document ON vendor_config(enable_document_mgmt);
CREATE INDEX idx_vendor_config_enable_performance ON vendor_config(enable_performance_mgmt);
```

**遇到的问题：**
- **问题描述：** 服务器启动时报错 `Error: listen EADDRINUSE: address already in use :::8888`
- **解决方案：** 使用netstat命令查找占用进程，通知用户执行 `taskkill /F /PID 17120` 关闭占用进程
- **结果：** 用户关闭进程后，服务器启动成功

**验证结果：**
- [x] 数据库迁移成功
- [x] 模型加载正常
- [x] API路由注册成功
- [x] 前端界面加载正常
- [x] 服务器运行正常

**待办事项：**
- [ ] 阶段2.1：修改供应商资料管理API路由
- [ ] 阶段2.2：修改供应商资料管理前端调用
- [ ] 阶段2.3：测试供应商资料管理功能

---

### 📅 2026-01-05 16:30 - 阶段2.1：修改供应商资料管理API路由
**策划者：** iFlow CLI
**阶段目标：** 将供应商资料管理API数据源从suppliers表切换到vendor_config表

**做了什么：**
- 修改 `server/routes/suppliers.js` 的 GET /api/suppliers/documents-summary 接口
- 将SQL查询从suppliers表改为vendor_config表
- 添加查询条件：WHERE enable_document_mgmt = 1 AND status = 'Active'
- 移除所有IQC数据获取逻辑
- 删除 POST /api/suppliers/import-from-iqc 路由（旧路由）

**关键决策：**
- 直接切换数据源，不保留suppliers表作为后备
- 只返回启用资料管理的供应商（enable_document_mgmt = 1）
- 移除IQC数据导入逻辑，改用配置中心统一管理

**代码片段：**
```javascript
// 修改前：从suppliers表查询
const [suppliers] = await sequelize.query(`
  SELECT id, name FROM suppliers
  WHERE status = 'active'
  ORDER BY name ASC
`);

// 修改后：从vendor_config表查询
const [suppliers] = await sequelize.query(`
  SELECT vc.id, vc.supplier_name as name
  FROM vendor_config vc
  WHERE vc.enable_document_mgmt = 1
    AND vc.status = 'Active'
  ORDER BY vc.supplier_name ASC
`);
```

**遇到的问题：**
- 无

**验证结果：**
- [x] SQL查询修改成功
- [x] API路由更新完成
- [x] 移除旧的IQC导入逻辑
- [ ] 功能测试待进行

**待办事项：**
- [ ] 阶段2.2：修改供应商资料管理前端调用
- [ ] 阶段2.3：测试供应商资料管理功能

---

### 📅 2026-01-05 17:00 - 阶段2.2：修改供应商资料管理前端调用
**策划者：** iFlow CLI
**阶段目标：** 更新供应商资料管理模块的API调用路径，适配新的配置中心接口

**做了什么：**
- 修改 `public/js/modules/supplier.js` 的 syncSuppliersFromIQC() 方法
- 将API调用路径从 `/api/suppliers/sync-from-iqc` 改为 `/api/vendors/sync-from-iqc`
- 移除解构赋值中的 `iqcFileName` 和 `iqcFileId` 变量
- 移除console.log中IQC数据源的日志输出

**关键决策：**
- 只修改API路径，保持其他逻辑不变
- 移除不再需要的变量，避免未使用警告
- 保持用户界面和交互逻辑不变

**代码片段：**
```javascript
// 修改前：
const response = await fetch('/api/suppliers/sync-from-iqc', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ mode: 'incremental' })
});

const { stats, iqcFileName, iqcFileId } = data;

// 修改后：
const response = await fetch('/api/vendors/sync-from-iqc', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ mode: 'incremental' })
});

const { stats } = data;
```

**遇到的问题：**
- **问题描述：** 使用replace工具时，多次出现"0 occurrences found for old_string"错误
- **解决方案：** 改用更精确的字符串匹配，只修改API路径和解构赋值这两行
- **结果：** 修改成功

**验证结果：**
- [x] API路径修改成功
- [x] 移除未使用变量成功
- [ ] 功能测试待进行

**待办事项：**
- [ ] 阶段2.3：测试供应商资料管理功能

---

### 📅 2026-01-05 17:30 - 阶段2.3：测试供应商资料管理功能
**策划者：** iFlow CLI
**阶段目标：** 测试供应商资料管理功能，验证数据源切换正常

**做了什么：**
- 检查vendor_config表数据（初始为空）
- 检查iqc_data表数据（2条记录，最新1089条数据）
- 验证IQCData模型能正确读取rawData字段
- 测试vendor-sync-service的syncFromIQC方法
- 测试供应商资料管理API的documents-summary接口
- 启用3个供应商的资料管理功能并验证返回结果

**关键决策：**
- 使用测试脚本验证功能，确保数据源切换正确
- 验证只返回enable_document_mgmt = 1的供应商
- 验证只返回status = 'Active'的供应商
- 验证按supplier_name ASC排序

**代码片段：**
```javascript
// 测试vendor-sync-service同步功能
const syncService = new VendorSyncService();
const result = await syncService.syncFromIQC({
  mode: 'full'
});
// 结果：从2个IQC文件中提取到71个唯一供应商，全部新增

// 测试供应商资料管理API
const [suppliers] = await sequelize.query(`
  SELECT vc.id, vc.supplier_name as name
  FROM vendor_config vc
  WHERE vc.enable_document_mgmt = 1
    AND vc.status = 'Active'
  ORDER BY vc.supplier_name ASC
`);
// 结果：正确返回3个启用的供应商
```

**遇到的问题：**
- **问题描述1：** vendor_config表初始为空，需要从IQC同步数据
- **解决方案：** 使用vendor-sync-service的syncFromIQC方法从IQC数据中提取供应商
- **结果：** 成功同步71个供应商到vendor_config表

- **问题描述2：** 需要验证修改后的API是否正确使用vendor_config表
- **解决方案：** 启用3个供应商的资料管理功能，测试API返回结果
- **结果：** API正确返回3个启用的供应商，验证通过

**验证结果：**
- [x] vendor-sync-service能正确从IQC数据中提取供应商
- [x] 同步功能正常工作
- [x] 修改后的供应商资料管理API能正确工作
- [x] 只返回enable_document_mgmt = 1的供应商
- [x] 只返回status = 'Active'的供应商
- [x] 按supplier_name ASC排序
- [x] 数据源切换成功

**待办事项：**
- [ ] 阶段3.1：创建绩效评价API
- [ ] 阶段3.2：创建绩效评价前端
- [ ] 阶段3.3：测试绩效评价功能
- [ ] 阶段4.1：数据迁移（清空重建）
- [ ] 阶段4.2：验证数据完整性

---

### 📅 2026-01-05 18:00 - 修复模块切换时事件绑定失败问题
**策划者：** iFlow CLI
**阶段目标：** 修复供应商配置中心模块在切换时"从IQC同步"按钮无响应的问题

**做了什么：**
- 分析问题原因：模块初始化时处于隐藏状态，按钮不在DOM中，导致事件绑定失败
- 修改bindEvents()方法，保存事件处理器引用，防止重复绑定
- 添加rebindEvents()方法，支持在模块切换时重新绑定事件
- 在Router中注册vendor-config路由，切换时自动重新绑定事件
- 添加供应商配置中心的页面标题
- 添加详细的日志输出，方便调试

**关键决策：**
- 使用事件处理器引用模式，确保可以正确移除和重新绑定事件
- 在路由切换时自动重新绑定事件，确保模块可见后按钮能正常工作
- 添加详细日志，便于后续调试和问题定位

**代码片段：**
```javascript
// 保存事件处理器引用
this.syncFromIQCHandler = () => this.syncFromIQC();
syncFromIQCBtn.addEventListener('click', this.syncFromIQCHandler);

// 重新绑定事件
rebindEvents() {
    syncFromIQCBtn.removeEventListener('click', this.syncFromIQCHandler);
    syncFromIQCBtn.addEventListener('click', this.syncFromIQCHandler);
}

// 路由注册
window.App.Router.register('vendor-config', () => {
    if (window.vendorConfigManager) {
        window.vendorConfigManager.rebindEvents();
    }
});
```

**遇到的问题：**
- **问题描述：** 点击"从IQC同步"按钮没有响应
- **根本原因：** 模块初始化时处于隐藏状态（有hidden类），按钮不在DOM中，事件绑定失败
- **解决方案：** 在路由切换时重新绑定事件，确保模块可见后按钮能正常工作
- **结果：** 按钮现在可以正常响应点击事件

**验证结果：**
- [x] 模块切换时事件绑定成功
- [x] "从IQC同步"按钮可以正常点击
- [x] 日志输出正常，便于调试
- [x] 页面标题正确显示

**待办事项：**
- [ ] 阶段3.1：创建绩效评价API
- [ ] 阶段3.2：创建绩效评价前端
- [ ] 阶段3.3：测试绩效评价功能
- [ ] 阶段4.1：数据迁移（清空重建）
- [ ] 阶段4.2：验证数据完整性

---

**📊 开发总结：**
- **完成阶段：** 阶段1（创建配置中心）、阶段2（切换供应商资料管理数据源）、BUG修复（事件绑定问题）
- **技术栈：** Node.js、Express、Sequelize、SQLite、JavaScript、CSS3
- **主要成果：** 成功创建供应商配置中心，完成数据源切换，修复事件绑定问题
- **代码质量：** 遵循BEM命名规范，采用三层架构，模块化设计
- **测试结果：** 71个供应商成功同步，API功能正常，数据源切换成功，事件绑定正常

**Git提交：**
- 提交ID：5c6871c
- 提交信息：✨ 实现供应商配置中心模块
- 文件变更：21个文件，新增3184行，删除242行

**待办事项：**
- [ ] 阶段3.1：创建绩效评价API
- [ ] 阶段3.2：创建绩效评价前端
- [ ] 阶段3.3：测试绩效评价功能
- [ ] 阶段4.1：数据迁移（清空重建）
- [ ] 阶段4.2：验证数据完整性

---

### 📅 2026-01-05 19:00 - 修复模态框显示问题
**策划者：** iFlow CLI
**阶段目标：** 修复供应商配置中心模态框无法正常显示的问题

**做了什么：**
- 分析问题原因：vendor-config-ui-utils.js中的showModal和confirm方法调用了不存在的window.showModal函数
- 修改confirm方法，使用与supplierUIUtils.confirmAction相同的实现方式
- 修改showModal方法，直接创建DOM元素而不是依赖window.App.Modal
- 添加完整的CSS样式和动画效果
- 参考supplier模块的模态框实现方式

**关键决策：**
- 不使用window.App.Modal，直接创建DOM元素
- 使用与supplierUIUtils.confirmAction相同的实现方式
- 添加完整的CSS样式和动画效果
- 确保模态框的z-index足够高（1003000）

**遇到的问题：**
- **问题描述：** 点击"从IQC同步"按钮后，背景变暗但没有模态框弹出
- **解决方案：** 修改showModal和confirm方法，直接创建DOM元素
- **结果：** 模态框可以正常显示

**验证结果：**
- [x] 模态框可以正常显示
- [x] 确认对话框可以正常工作

**Git提交记录：**
- 提交ID：fe28bb6 - 🐛 修复供应商配置中心按钮无响应问题
- 提交ID：fba3529 - 🐛 修复供应商配置中心模态框问题
- 提交ID：ac368e0 - 🐛 修复供应商配置中心模态框显示问题

---

### 📅 2026-01-05 20:00 - 优化供应商配置中心操作方式
**策划者：** iFlow CLI
**阶段目标：** 根据用户反馈优化操作方式，提供更直观的复选框操作

**做了什么：**
- 将资料管理和绩效评价列的✅/❌改为可点击的复选框
- 添加toggleVendorConfig方法，处理复选框点击事件
- 点击复选框后弹出确认对话框，确认后才保存修改
- 添加复选框的CSS样式和悬停动画效果
- 添加复选框的hover效果（放大、变色）

**关键决策：**
- 用户反馈不喜欢单个编辑和批量操作方式
- 采用直接勾选复选框的方式，更直观便捷
- 保留确认对话框，防止误操作
- 添加视觉反馈，提升用户体验

**遇到的问题：**
- 无

**验证结果：**
- [x] 复选框可以正常显示
- [x] 点击复选框会弹出确认对话框
- [x] 确认后保存修改成功
- [x] 取消后恢复复选框状态
- [x] 复选框悬停效果正常

**Git提交记录：**
- 提交ID：d56bb2e - ✨ 优化供应商配置中心操作方式

**待办事项：**
- [ ] 阶段3.1：创建绩效评价API
- [ ] 阶段3.2：创建绩效评价前端
- [ ] 阶段3.3：测试绩效评价功能
- [ ] 阶段4.1：数据迁移（清空重建）
- [ ] 阶段4.2：验证数据完整性

---

### 📅 2026-01-06 10:00 - 阶段5：UI/UX全面优化（玻璃态设计）
**策划者：** iFlow CLI
**阶段目标：** 实现现代化的玻璃态UI设计，提升视觉高级感和用户体验

**做了什么：**

#### 第一阶段：核心功能开发
1. **添加统计卡片区域**
   - 创建4个统计卡片：总供应商数、资料管理启用、绩效管理启用、最后同步时间
   - 每个卡片包含图标、数值、标签
   - 添加统计API接口：GET /api/vendors/config/statistics
   - 前端实现loadStatistics()和renderStatistics()方法

2. **优化控制面板布局**
   - 将批量操作按钮从表格下方移到控制面板
   - 统一控制面板样式
   - 添加控制面板标题："🔍 筛选和操作"

3. **优化表格设计**
   - 去掉表格全选列（移除复选框）
   - 添加表格标题："📋 供应商配置表格"
   - 修改批量操作逻辑：批量启用/禁用对所有筛选结果生效

#### 第二阶段：UI/UX优化（第一版 - 保守设计）
1. **配色方案优化**
   - 建立专业配色系统
   - 添加语义化颜色（主色、状态色、中性色）
   - 使用低饱和度、高对比度的配色

2. **排版和间距优化**
   - 建立统一的8px网格系统
   - 定义字体层级（12px-30px）
   - 优化行高（1.25-1.75）

3. **统计卡片设计优化**
   - 添加轻微阴影和圆角
   - 添加悬停效果
   - 使用白色背景

4. **控制面板设计优化**
   - 优化搜索框样式
   - 优化下拉框样式
   - 提升整体可用性

5. **表格设计优化**
   - 实现斑马纹
   - 添加悬停高亮
   - 优化边框和圆角

#### 第三阶段：玻璃态UI设计（最终版）
1. **实现玻璃态背景和毛玻璃效果**
   - 统计卡片容器：半透明渐变背景（95%透明度）
   - 毛玻璃效果：backdrop-filter: blur(10px)
   - 添加灰色边框：rgba(229, 231, 235, 0.8)

2. **添加渐变色和光影效果**
   - 按钮渐变色背景
   - 光泽扫过动画
   - 多层阴影叠加

3. **优化阴影层次和立体感**
   - 统计卡片：3-5层阴影
   - 控制面板：多层阴影
   - 内阴影增加质感

4. **优化按钮和交互效果**
   - 统一按钮背景为半透明白色
   - 通过边框颜色区分操作类型
   - 悬停时添加淡淡的颜色背景

5. **优化表格和卡片设计**
   - 统计卡片包装容器：添加可见容器
   - 表格包装容器：标题和表格在同一容器
   - 消除横向滚动条

**关键决策：**
- 采用玻璃态设计（Glassmorphism）：半透明背景 + 毛玻璃效果
- 统一容器设计：统计卡片、控制面板、表格都有独立容器
- 统一边框颜色：从白色半透明改为灰色半透明，确保四边可见
- 移除表格行缩放效果：避免横向滚动条
- 批量操作按钮使用边框颜色区分，而非背景色

**代码片段：**
```javascript
// 统计API接口
router.get('/config/statistics', authenticateToken, async (req, res) => {
    try {
        // 总供应商数
        const total = await VendorConfig.count();
        
        // 资料管理启用数
        const documentEnabled = await VendorConfig.count({
            where: { enable_document_mgmt: 1, status: 'Active' }
        });
        
        // 绩效管理启用数
        const performanceEnabled = await VendorConfig.count({
            where: { enable_performance_mgmt: 1, status: 'Active' }
        });
        
        // 最后同步时间
        const latestVendor = await VendorConfig.findOne({
            order: [['updated_at', 'DESC']]
        });
        
        const lastSyncTime = latestVendor ? latestVendor.updated_at : null;
        
        res.json({
            success: true,
            data: {
                total,
                document_enabled: documentEnabled,
                performance_enabled: performanceEnabled,
                last_sync_time: lastSyncTime
            }
        });
    } catch (error) {
        logger.error('获取统计信息失败:', error);
        res.status(500).json({
            success: false,
            error: '获取统计信息失败'
        });
    }
});

// 批量操作（对所有筛选结果生效）
async batchUpdateConfig(config) {
    // 获取当前筛选结果
    const filteredVendors = this.vendors.filter(vendor => {
        if (this.filter.source && vendor.source !== this.filter.source) return false;
        if (this.filter.status && vendor.status !== this.filter.status) return false;
        if (this.filter.keyword && !vendor.supplier_name.includes(this.filter.keyword)) return false;
        return true;
    });
    
    const ids = filteredVendors.map(v => v.id);
    
    if (ids.length === 0) {
        window.vendorConfigUIUtils.showToast('没有符合条件的供应商', 'warning');
        return;
    }
    
    const action = config.status === 'Active' ? '启用' : '停用';
    const message = `确定要${action}当前筛选结果中的 ${ids.length} 个供应商吗？`;
    
    if (!await window.vendorConfigUIUtils.confirm(message)) {
        return;
    }
    
    const result = await window.vendorConfigServices.batchUpdateConfig(ids, config);
    // ...
}
```

```css
/* 玻璃态容器样式 */
.vendor-config__stats-wrapper {
    margin-bottom: var(--vendor-spacing-6);
    padding: var(--vendor-spacing-5);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(249, 250, 251, 0.95) 100%);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(229, 231, 235, 0.8);
    border-radius: var(--vendor-border-radius-xl);
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -2px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.6);
}

/* 统计卡片（玻璃态） */
.vendor-config__stat-card {
    display: flex;
    align-items: center;
    gap: var(--vendor-spacing-4);
    padding: var(--vendor-spacing-4);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(229, 231, 235, 0.6);
    border-radius: var(--vendor-border-radius-xl);
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -2px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.5);
    transition: all var(--vendor-transition-base);
    position: relative;
    overflow: hidden;
}

/* 统计卡片光泽扫过动画 */
.vendor-config__stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
}

.vendor-config__stat-card:hover::before {
    left: 100%;
}

/* 批量操作按钮（统一背景，边框区分） */
.vendor-config__btn--primary {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(249, 250, 251, 0.9) 100%);
    backdrop-filter: blur(5px);
    color: var(--vendor-color-primary-dark);
    border: 1px solid rgba(37, 99, 235, 0.3);
}

.vendor-config__btn--primary:hover {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%);
    border-color: var(--vendor-color-primary);
}

.vendor-config__btn--danger {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(249, 250, 251, 0.9) 100%);
    backdrop-filter: blur(5px);
    color: var(--vendor-color-danger-dark);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.vendor-config__btn--danger:hover {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
    border-color: var(--vendor-color-danger);
}

/* 表格容器（消除横向滚动条） */
.vendor-config__table-container {
    overflow-x: hidden;  /* 改为hidden，消除横向滚动条 */
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(249, 250, 251, 0.95) 100%);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(229, 231, 235, 0.6);
    border-radius: var(--vendor-border-radius-xl);
}

/* 表格行悬停（移除缩放效果） */
.vendor-config__table tbody tr:hover {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
    box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
    /* 移除了 transform: scale(1.01); */
}
```

**遇到的问题：**
- **问题描述1：** 控制面板的左侧筛选区域和右侧批量操作区域融合得不够好
- **解决方案：** 统一控制面板作为一个容器，左侧筛选（flex: 1）和右侧批量操作（flex-shrink: 0）
- **结果：** 两个区域完美融合

- **问题描述2：** 批量操作按钮显示浅绿色背景，与筛选框格格不入
- **解决方案：** 删除旧的批量操作栏样式，统一按钮背景为半透明白色，通过边框颜色区分
- **结果：** 按钮与筛选框完美统一

- **问题描述3：** 统计卡片看不到外部容器，边框只有左右下三边可见
- **解决方案：** 给统计卡片添加包装容器，边框颜色从白色半透明改为灰色半透明
- **结果：** 容器和边框都清晰可见

- **问题描述4：** 表格出现横向滚动条
- **解决方案：** 将overflow-x从auto改为hidden，移除表格行悬停时的缩放效果
- **结果：** 横向滚动条消除，表格完美显示

- **问题描述5：** 表格标题和表格不在同一个容器内
- **解决方案：** 添加表格包装容器，将标题和表格包裹在一起
- **结果：** 标题和表格在同一容器内

**验证结果：**
- [x] 统计卡片容器可见
- [x] 统计卡片四边边框清晰可见
- [x] 控制面板统一设计
- [x] 批量操作按钮与筛选框完美统一
- [x] 表格容器可见
- [x] 表格标题和表格在同一容器内
- [x] 无横向滚动条
- [x] 玻璃态效果完美呈现
- [x] 悬停动画流畅
- [x] 响应式布局正常

**Git提交记录：**
- 提交ID：59ec046 - ✨ 完成供应商配置中心UI/UX优化：配色系统、排版、卡片设计、表格优化、响应式设计
- 提交ID：f9cf279 - ✨ 完成供应商配置中心玻璃态UI设计：统计卡片容器、控制面板优化、表格容器统一设计、消除横向滚动条

**待办事项：**
- [ ] 阶段3.1：创建绩效评价API
- [ ] 阶段3.2：创建绩效评价前端
- [ ] 阶段3.3：测试绩效评价功能
- [ ] 阶段4.1：数据迁移（清空重建）
- [ ] 阶段4.2：验证数据完整性

---

**📊 开发总结（截至2026-01-06）：**
- **完成阶段：** 阶段1（创建配置中心）、阶段2（切换供应商资料管理数据源）、阶段5（UI/UX全面优化）
- **技术栈：** Node.js、Express、Sequelize、SQLite、JavaScript、CSS3、Glassmorphism设计
- **主要成果：** 
  - 成功创建供应商配置中心
  - 完成数据源切换
  - 实现统计卡片功能
  - 完成控制面板优化
  - 实现玻璃态UI设计
  - 消除所有UI问题
- **代码质量：** 遵循BEM命名规范，采用三层架构，模块化设计，统一设计系统
- **测试结果：** 71个供应商成功同步，API功能正常，数据源切换成功，UI/UX优化完成

**Git提交：**
- 总提交数：10次
- 最新提交：f9cf279
- 文件变更：24个文件，新增3500+行，删除400+行

**待办事项：**
- [ ] 阶段3.1：创建绩效评价API
- [ ] 阶段3.2：创建绩效评价前端
- [ ] 阶段3.3：测试绩效评价功能
- [ ] 阶段4.1：数据迁移（清空重建）
- [ ] 阶段4.2：验证数据完整性

