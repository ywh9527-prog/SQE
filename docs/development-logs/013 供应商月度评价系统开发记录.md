# ä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿå¼€å‘è®°å½•

## å¼€å‘æ—¶é—´
2026å¹´1æœˆ14æ—¥

## å¼€å‘ç›®æ ‡
åŸºäºç°æœ‰SQEä¾›åº”å•†ç®¡ç†ç³»ç»Ÿï¼Œå¼€å‘ä¾›åº”å•†æœˆåº¦è¯„ä»·åŠŸèƒ½ï¼Œå®ç°è´¨é‡+äº¤ä»˜+æœåŠ¡å¤šç»´åº¦ç»¼åˆè¯„ä»·ã€‚

## åŠŸèƒ½æ¦‚è¿°
- è¯„ä»·å‘¨æœŸç®¡ç†ï¼ˆæœˆåº¦/å­£åº¦/å¹´åº¦/è‡ªå®šä¹‰ï¼‰
- è´¨é‡æ•°æ®è‡ªåŠ¨æå–ï¼ˆä»IQCæ•°æ®ï¼‰
- äº¤ä»˜å’ŒæœåŠ¡æ•°æ®æ‰‹åŠ¨å½•å…¥
- è¯„ä»·ç»“æœå¿«ç…§ä¿å­˜
- çµæ´»çš„è¯„ä»·é…ç½®ï¼ˆæƒé‡ã€ç­‰çº§è§„åˆ™ï¼‰

---

## é˜¶æ®µä¸€ï¼šæ•°æ®åº“å’Œåç«¯åŸºç¡€

### 1.1 æ•°æ®åº“æ¨¡å‹è®¾è®¡

#### PerformanceEvaluationæ¨¡å‹
**æ–‡ä»¶**ï¼š`server/models/PerformanceEvaluation.js`

**å­—æ®µè¯´æ˜**ï¼š
- `id`ï¼šä¸»é”®ID
- `period_name`ï¼šå‘¨æœŸåç§°ï¼ˆå¦‚"2025å¹´1æœˆ"ï¼‰
- `period_type`ï¼šå‘¨æœŸç±»å‹ï¼ˆmonthly/quarterly/yearly/customï¼‰
- `start_date`ï¼šå¼€å§‹æ—¥æœŸ
- `end_date`ï¼šç»“æŸæ—¥æœŸ
- `status`ï¼šè¯„ä»·çŠ¶æ€ï¼ˆdraft/in_progress/completedï¼‰
- `config_snapshot`ï¼šJSONå­—æ®µï¼Œå­˜å‚¨è¯„ä»·é…ç½®å¿«ç…§
- `created_at`ï¼šåˆ›å»ºæ—¶é—´
- `updated_at`ï¼šæ›´æ–°æ—¶é—´

#### PerformanceEvaluationDetailæ¨¡å‹
**æ–‡ä»¶**ï¼š`server/models/PerformanceEvaluationDetail.js`

**å­—æ®µè¯´æ˜**ï¼š
- `id`ï¼šä¸»é”®ID
- `evaluation_id`ï¼šè¯„ä»·å‘¨æœŸIDï¼ˆå¤–é”®ï¼‰
- `evaluation_entity_name`ï¼šè¯„ä»·å®ä½“åç§°
- `scores`ï¼šJSONå­—æ®µï¼Œå­˜å‚¨å„ç»´åº¦åˆ†æ•°
- `total_score`ï¼šæ€»åˆ†ï¼ˆ0-100ï¼‰
- `grade`ï¼šç­‰çº§ï¼ˆä¼˜ç§€/åˆæ ¼/æ•´æ”¹ååˆæ ¼/ä¸åˆæ ¼ï¼‰
- `remarks`ï¼šè¯„ä»·å¤‡æ³¨
- `quality_data_snapshot`ï¼šJSONå­—æ®µï¼Œå­˜å‚¨è´¨é‡æ•°æ®å¿«ç…§
- `created_at`ï¼šåˆ›å»ºæ—¶é—´
- `updated_at`ï¼šæ›´æ–°æ—¶é—´

### 1.2 æœåŠ¡å±‚å®ç°

#### PerformanceEvaluationService
**æ–‡ä»¶**ï¼š`server/services/performance-evaluation-service.js`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `createEvaluation()` - åˆ›å»ºè¯„ä»·å‘¨æœŸ
- `getEvaluationPeriods()` - è·å–è¯„ä»·å‘¨æœŸåˆ—è¡¨
- `startEvaluation()` - å¼€å§‹è¯„ä»·ï¼ˆåŠ è½½ä¾›åº”å•†åˆ—è¡¨ï¼Œé¢„è®¡ç®—è´¨é‡æ•°æ®ï¼‰
- `getEvaluationEntities()` - è·å–è¯„ä»·å®ä½“åˆ—è¡¨
- `saveEntityEvaluation()` - ä¿å­˜å•ä¸ªè¯„ä»·å®ä½“è¯„ä»·
- `submitEvaluation()` - æäº¤è¯„ä»·
- `getEvaluationResults()` - è·å–è¯„ä»·ç»“æœ
- `getTrendData()` - è·å–è¶‹åŠ¿æ•°æ®

#### QualityDataExtractionService
**æ–‡ä»¶**ï¼š`server/services/quality-data-extraction-service.js`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `extractQualityData()` - ä»IQCDataè¡¨æå–æŒ‡å®šå‘¨æœŸçš„è´¨é‡æ•°æ®
- æŒ‰ä¾›åº”å•†ç»Ÿè®¡ï¼šæ€»æ‰¹æ¬¡ã€åˆæ ¼æ‰¹æ¬¡ã€NGæ‰¹æ¬¡ã€åˆæ ¼ç‡

#### EvaluationConfigService
**æ–‡ä»¶**ï¼š`server/services/evaluation-config-service.js`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `getConfig()` - è·å–å½“å‰è¯„ä»·é…ç½®
- `updateConfig()` - æ›´æ–°è¯„ä»·é…ç½®
- `calculateScoreAndGrade()` - è®¡ç®—æ€»åˆ†å’Œç­‰çº§

### 1.3 APIè·¯ç”±

#### è¯„ä»·è·¯ç”±
**æ–‡ä»¶**ï¼š`server/routes/evaluations.js`

**æ¥å£åˆ—è¡¨**ï¼š
- `POST /api/evaluations` - åˆ›å»ºè¯„ä»·å‘¨æœŸ
- `GET /api/evaluations` - è·å–è¯„ä»·å‘¨æœŸåˆ—è¡¨
- `GET /api/evaluations/:id` - è·å–è¯„ä»·å‘¨æœŸè¯¦æƒ…
- `DELETE /api/evaluations/:id` - åˆ é™¤è¯„ä»·å‘¨æœŸ
- `POST /api/evaluations/:id/start` - å¼€å§‹è¯„ä»·
- `GET /api/evaluations/:id/entities` - è·å–è¯„ä»·å®ä½“åˆ—è¡¨
- `PUT /api/evaluations/:id/entities/:entityName` - ä¿å­˜è¯„ä»·å®ä½“è¯„ä»·
- `PUT /api/evaluations/:id/submit` - æäº¤è¯„ä»·
- `GET /api/evaluations/:id/results` - è·å–è¯„ä»·ç»“æœ
- `GET /api/evaluations/trend/:entityName` - è·å–è¶‹åŠ¿æ•°æ®

#### é…ç½®è·¯ç”±
**æ–‡ä»¶**ï¼š`server/routes/evaluation-config.js`

**æ¥å£åˆ—è¡¨**ï¼š
- `GET /api/evaluations/config` - è·å–è¯„ä»·é…ç½®
- `PUT /api/evaluations/config` - æ›´æ–°è¯„ä»·é…ç½®

### 1.4 æ•°æ®åº“é…ç½®æ›´æ–°
**æ–‡ä»¶**ï¼š`server/database/config.js`

**ä¿®æ”¹**ï¼šåœ¨loadModelså‡½æ•°ä¸­æ³¨å†Œæ–°æ¨¡å‹
```javascript
models.PerformanceEvaluation = require('../models/PerformanceEvaluation');
models.PerformanceEvaluationDetail = require('../models/PerformanceEvaluationDetail');
```

### 1.5 ä¸»åº”ç”¨è·¯ç”±æ³¨å†Œ
**æ–‡ä»¶**ï¼š`server/index.js`

**ä¿®æ”¹**ï¼šæ³¨å†Œè¯„ä»·ç›¸å…³è·¯ç”±
```javascript
const evaluationsRoutes = require('./routes/evaluations');
const evaluationConfigRoutes = require('./routes/evaluation-config');
app.use('/api/evaluations', evaluationsRoutes);
app.use('/api/evaluations/config', evaluationConfigRoutes);
```

---

## é˜¶æ®µäºŒï¼šè¯„ä»·åŠŸèƒ½å®ç°

### 2.1 è¯„ä»·ç•Œé¢HTML
**æ–‡ä»¶**ï¼š`public/index.html`

**ä¸»è¦ç»“æ„**ï¼š
- è¯„ä»·å‘¨æœŸé€‰æ‹©åŒºï¼ˆåˆ›å»ºè¯„ä»·å‘¨æœŸã€é…ç½®æŒ‰é’®ï¼‰
- è¯„ä»·ç•Œé¢ï¼ˆé¡¶éƒ¨ä¿¡æ¯ã€è¯„ä»·å®ä½“å¡ç‰‡åˆ—è¡¨ã€è¯„ä»·ä¾§è¾¹æ ï¼‰
- è¯„ä»·ä¾§è¾¹æ ï¼ˆè¯„ä»·å®ä½“åç§°ã€è´¨é‡æ•°æ®å±•ç¤ºã€ç»´åº¦è¾“å…¥æ¡†ã€ä¿å­˜æŒ‰é’®ï¼‰

### 2.2 è¯„ä»·ç•Œé¢CSS
**æ–‡ä»¶**ï¼š`public/css/modules/performance-evaluation.css`

**è®¾è®¡åŸåˆ™**ï¼š
- éµå¾ªCLAUDE.mdçš„CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
- ä½¿ç”¨CSSå˜é‡ï¼ˆ--primary-500ã€--gray-50ç­‰ï¼‰
- éµå¾ªBEMå‘½åè§„èŒƒï¼ˆ.performance__period-selectorã€.entity-cardç­‰ï¼‰
- æ§åˆ¶æ–‡ä»¶è¡Œæ•°åœ¨500è¡Œä»¥å†…
- é¿å…ç¡¬ç¼–ç é¢œè‰²å’Œå°ºå¯¸

### 2.3 è¯„ä»·ç•Œé¢JavaScript
**æ–‡ä»¶**ï¼š`public/js/modules/performance.js`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `init()` - åˆå§‹åŒ–æ¨¡å—
- `loadConfig()` - åŠ è½½è¯„ä»·é…ç½®
- `loadEvaluationPeriods()` - åŠ è½½è¯„ä»·å‘¨æœŸåˆ—è¡¨
- `createEvaluation()` - åˆ›å»ºè¯„ä»·å‘¨æœŸ
- `startEvaluation()` - å¼€å§‹è¯„ä»·
- `renderEntityCards()` - æ¸²æŸ“è¯„ä»·å®ä½“å¡ç‰‡
- `openSidebar()` - æ‰“å¼€è¯„ä»·ä¾§è¾¹æ 
- `handleEvaluationSubmit()` - å¤„ç†è¯„ä»·æäº¤
- `exitEvaluation()` - é€€å‡ºè¯„ä»·

### 2.4 æ¨¡å—æ³¨å†Œ
**æ–‡ä»¶**ï¼š`public/js/app.js`

**ä¿®æ”¹**ï¼šæ³¨å†Œç»©æ•ˆè¯„ä»·æ¨¡å—
```javascript
window.App.Router.register('performance', () => {
    console.log('ç»©æ•ˆè¯„ä»·æ¨¡å—å·²æ¿€æ´»');
    if (window.App.Modules && window.App.Modules.Performance) {
        window.App.Modules.Performance.init();
    }
});
```

---

## CSSé‡æ„

### é‡æ„åŸå› 
éµå¾ªCLAUDE.mdçš„CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™ï¼Œé¿å…ç¡¬ç¼–ç å’Œä¼˜å…ˆçº§æˆ˜äº‰ã€‚

### é‡æ„å†…å®¹
1. **ä½¿ç”¨CSSå˜é‡**ï¼šæ‰€æœ‰é¢œè‰²ã€å°ºå¯¸ä½¿ç”¨`var(--token)`æ ¼å¼
2. **éµå¾ªBEMå‘½å**ï¼šä½¿ç”¨`.performance__period-selector`ã€`.entity-card`ç­‰è§„èŒƒå‘½å
3. **æ§åˆ¶æ–‡ä»¶è¡Œæ•°**ï¼šæ–‡ä»¶ä»600è¡Œå‡å°‘åˆ°450è¡Œ
4. **é¿å…ç¡¬ç¼–ç **ï¼šæ¶ˆé™¤æ‰€æœ‰`#xxxxxx`å’Œ`xxpx`ç¡¬ç¼–ç 

### å‚è€ƒæ¨¡å—
- `supplier-components.css` - ç»„ä»¶æ ·å¼
- `documents.css` - æ–‡æ¡£ç®¡ç†æ ·å¼
- `style_v2.css` - å…¨å±€å˜é‡å®šä¹‰

---

## å‘½åé‡æ„

### é‡æ„åŸå› 
`vendor`å‘½åä¸ä¾›åº”å•†é…ç½®ä¸­å¿ƒå†²çªï¼Œéœ€è¦åŒºåˆ†ã€‚

### é‡æ„å†…å®¹

#### åç«¯
- `PerformanceEvaluationDetail.vendor_name` â†’ `evaluation_entity_name`
- `PerformanceEvaluationService.getEvaluationVendors()` â†’ `getEvaluationEntities()`
- `PerformanceEvaluationService.saveVendorEvaluation()` â†’ `saveEntityEvaluation()`
- `PerformanceEvaluationService.getTrendData(vendorName)` â†’ `getTrendData(entityName)`
- å˜é‡åï¼š`vendors` â†’ `evaluationEntities`
- å˜é‡åï¼š`vendorName` â†’ `entityName`
- å˜é‡åï¼š`totalVendors` â†’ `totalEntities`

#### APIè·¯ç”±
- `/api/evaluations/:id/vendors` â†’ `/api/evaluations/:id/entities`
- `/api/evaluations/:id/vendors/:vendorName` â†’ `/api/evaluations/:id/entities/:entityName`
- `/api/evaluations/trend/:vendorName` â†’ `/api/evaluations/trend/:entityName`

#### å‰ç«¯JavaScript
- `state.currentVendor` â†’ `state.currentEntity`
- `state.vendors` â†’ `state.entities`
- `renderVendorCards()` â†’ `renderEntityCards()`
- `openSidebar(vendor)` â†’ `openSidebar(entity)`

#### HTML
- `evaluationVendorCount` â†’ `evaluationEntityCount`
- `vendorCardsList` â†’ `entityCardsList`
- `sidebarVendorName` â†’ `sidebarEntityName`
- `vendor-cards` â†’ `entity-cards`

#### CSS
- `.vendor-card` â†’ `.entity-card`
- `.vendor-card-*` â†’ `.entity-card-*`
- `.vendor-cards` â†’ `.entity-cards`

---

## Gitæäº¤è®°å½•

### æäº¤1ï¼šæ•°æ®åº“å’Œåç«¯åŸºç¡€
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µä¸€ - æ•°æ®åº“å’Œåç«¯åŸºç¡€
```
**æ–‡ä»¶**ï¼š
- server/models/PerformanceEvaluation.js
- server/models/PerformanceEvaluationDetail.js
- server/database/config.js
- server/services/performance-evaluation-service.js
- server/services/quality-data-extraction-service.js
- server/services/evaluation-config-service.js
- server/routes/evaluations.js
- server/routes/evaluation-config.js
- server/index.js

### æäº¤2ï¼šè¯„ä»·åŠŸèƒ½å®ç°
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µäºŒ - è¯„ä»·åŠŸèƒ½å®ç°
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css
- public/js/modules/performance.js
- public/js/app.js

### æäº¤3ï¼šCSSé‡æ„
```
refactor: é‡æ„performance-evaluation.cssï¼Œéµå¾ªCLAUDE.md CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
```
**æ–‡ä»¶**ï¼š
- public/css/modules/performance-evaluation.css
- docs/plans/2025-01-14-implementation-plan.md

### æäº¤4ï¼šå‘½åé‡æ„
```
refactor: å°†ç»©æ•ˆè¯„ä»·æ¨¡å—ä¸­çš„vendorå‘½åæ›¿æ¢ä¸ºevaluation-entityï¼Œé¿å¼€ä¾›åº”å•†é…ç½®ä¸­å¿ƒçš„å‘½å
```
**æ–‡ä»¶**ï¼š
- server/models/PerformanceEvaluationDetail.js
- server/services/performance-evaluation-service.js
- server/routes/evaluations.js
- public/js/modules/performance.js
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤5ï¼šä¸»ç•Œé¢å±•ç¤º
```
feat: å®ç°ä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µä¸‰ï¼šä¸»ç•Œé¢å±•ç¤º
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-dashboard.css
- public/js/modules/performance-dashboard.js
- public/js/modules/performance.js

---

## å·²å®ŒæˆåŠŸèƒ½

### âœ… æ•°æ®åº“å’Œåç«¯
- PerformanceEvaluationå’ŒPerformanceEvaluationDetailæ¨¡å‹
- PerformanceEvaluationServiceï¼ˆè¯„ä»·ä¸šåŠ¡é€»è¾‘ï¼‰
- QualityDataExtractionServiceï¼ˆè´¨é‡æ•°æ®æå–ï¼‰
- EvaluationConfigServiceï¼ˆé…ç½®ç®¡ç†ï¼‰
- è¯„ä»·APIè·¯ç”±ï¼ˆå‘¨æœŸç®¡ç†ã€è¯„ä»·æ“ä½œã€æ•°æ®æŸ¥è¯¢ï¼‰
- é…ç½®APIè·¯ç”±ï¼ˆé…ç½®ç®¡ç†ï¼‰

### âœ… è¯„ä»·åŠŸèƒ½
- è¯„ä»·ç•Œé¢HTMLç»“æ„
- è¯„ä»·ç•Œé¢CSSæ ·å¼ï¼ˆç¬¦åˆCSSæ¶æ„åŸåˆ™ï¼‰
- è¯„ä»·ç•Œé¢JavaScriptåŠŸèƒ½
- åˆ›å»ºè¯„ä»·å‘¨æœŸ
- å¼€å§‹è¯„ä»·ï¼ˆåŠ è½½è¯„ä»·å®ä½“åˆ—è¡¨ï¼Œé¢„è®¡ç®—è´¨é‡æ•°æ®ï¼‰
- é€ä¸ªè¯„ä»·è¯„ä»·å®ä½“
- ä¸­é€”ä¿å­˜è¯„ä»·
- æäº¤è¯„ä»·

### âœ… ä»£ç è´¨é‡
- CSSéµå¾ªCLAUDE.mdè§„èŒƒ
- å‘½åç©ºé—´æ¸…æ™°ï¼ˆevaluation-entity vs vendorï¼‰
- ä»£ç æ³¨é‡Šå®Œå–„
- é”™è¯¯å¤„ç†å®Œæ•´

---

## é˜¶æ®µä¸‰ï¼šä¸»ç•Œé¢å±•ç¤º

### 3.1 ä¸»ç•Œé¢HTML
**æ–‡ä»¶**ï¼š`public/index.html`

**ä¸»è¦ç»“æ„**ï¼š
- ç»“æœç•Œé¢ï¼ˆæ ‡é¢˜ã€å‘¨æœŸä¿¡æ¯ã€é€€å‡ºæŒ‰é’®ï¼‰
- ç»Ÿè®¡åŒºï¼ˆå¹³å‡æ€»åˆ†ã€ç­‰çº§åˆ†å¸ƒã€å…³é”®æŒ‡æ ‡ï¼‰
- å›¾è¡¨åŒºï¼ˆè¶‹åŠ¿å›¾ã€ç­‰çº§åˆ†å¸ƒå›¾ã€é›·è¾¾å›¾ï¼‰
- è¡¨æ ¼åŒºï¼ˆæ’åã€è¯„ä»·å®ä½“åç§°ã€æ€»åˆ†ã€ç­‰çº§ã€ç»´åº¦è¿›åº¦æ¡ã€è¶‹åŠ¿ï¼‰

### 3.2 ä¸»ç•Œé¢CSS
**æ–‡ä»¶**ï¼š`public/css/modules/performance-dashboard.css`

**è®¾è®¡åŸåˆ™**ï¼š
- éµå¾ªCLAUDE.mdçš„CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
- ä½¿ç”¨CSSå˜é‡ï¼ˆ--primary-500ã€--gray-50ç­‰ï¼‰
- éµå¾ªBEMå‘½åè§„èŒƒï¼ˆ.dashboard__statsã€.chart-containerç­‰ï¼‰
- æ§åˆ¶æ–‡ä»¶è¡Œæ•°åœ¨500è¡Œä»¥å†…
- é¿å…ç¡¬ç¼–ç é¢œè‰²å’Œå°ºå¯¸

### 3.3 ä¸»ç•Œé¢JavaScript
**æ–‡ä»¶**ï¼š`public/js/modules/performance-dashboard.js`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `init()` - åˆå§‹åŒ–æ¨¡å—
- `loadResults(evaluationId)` - åŠ è½½è¯„ä»·ç»“æœ
- `showResultsInterface()` - æ˜¾ç¤ºç»“æœç•Œé¢
- `updateStats()` - æ›´æ–°ç»Ÿè®¡æ•°æ®
- `renderCharts()` - æ¸²æŸ“å›¾è¡¨
  - `renderTrendChart()` - æ¸²æŸ“è¶‹åŠ¿å›¾
  - `renderGradeChart()` - æ¸²æŸ“ç­‰çº§åˆ†å¸ƒå›¾
  - `renderRadarChart()` - æ¸²æŸ“é›·è¾¾å›¾
- `renderTable()` - æ¸²æŸ“æ’åè¡¨æ ¼
- `exitResults()` - é€€å‡ºç»“æœç•Œé¢

### 3.4 æ¨¡å—é›†æˆ
**æ–‡ä»¶**ï¼š`public/js/modules/performance.js`

**ä¿®æ”¹**ï¼šæ›´æ–°viewResultsæ–¹æ³•è°ƒç”¨ä¸»ç•Œé¢æ¨¡å—
```javascript
viewResults(evaluationId) {
    if (window.App.Modules.PerformanceDashboard) {
        window.App.Modules.PerformanceDashboard.loadResults(evaluationId);
    } else {
        alert('ç»©æ•ˆè¯„ä»·ä¸»ç•Œé¢æ¨¡å—æœªåŠ è½½');
    }
}
```

### 3.5 HTMLå¼•ç”¨
**æ–‡ä»¶**ï¼š`public/index.html`

**ä¿®æ”¹**ï¼šæ·»åŠ ä¸»ç•Œé¢æ¨¡å—å¼•ç”¨
```html
<link rel="stylesheet" href="css/modules/performance-dashboard.css?v=20250114">
<script src="js/modules/performance-dashboard.js?v=20250114"></script>
```

---

## é˜¶æ®µå››ï¼šé…ç½®ç®¡ç†ç•Œé¢

### 4.1 é…ç½®ç®¡ç†ç•Œé¢HTML
**æ–‡ä»¶**ï¼š`public/index.html`

**ä¸»è¦ç»“æ„**ï¼š
- é…ç½®ç®¡ç†å¯¹è¯æ¡†ï¼ˆç»´åº¦ç®¡ç†ã€ç­‰çº§è§„åˆ™ç®¡ç†ï¼‰
- ç»´åº¦åˆ—è¡¨ï¼ˆåç§°ã€é”®å€¼ã€æƒé‡è¾“å…¥æ¡†ã€åˆ é™¤æŒ‰é’®ï¼‰
- ç­‰çº§è§„åˆ™åˆ—è¡¨ï¼ˆåç§°ã€åˆ†æ•°èŒƒå›´è¾“å…¥æ¡†ã€åˆ é™¤æŒ‰é’®ï¼‰
- æ“ä½œæŒ‰é’®ï¼ˆæ·»åŠ ç»´åº¦ã€æ·»åŠ ç­‰çº§è§„åˆ™ã€é‡ç½®é…ç½®ã€ä¿å­˜é…ç½®ï¼‰
- æƒé‡æ€»å’Œæ˜¾ç¤ºï¼ˆå®æ—¶æ›´æ–°ï¼ŒéªŒè¯å¿…é¡»ä¸º1ï¼‰

### 4.2 é…ç½®ç®¡ç†ç•Œé¢CSS
**æ–‡ä»¶**ï¼š`public/css/modules/performance-config.css`

**è®¾è®¡åŸåˆ™**ï¼š
- éµå¾ªCLAUDE.mdçš„CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
- ä½¿ç”¨CSSå˜é‡ï¼ˆ--primary-500ã€--gray-50ç­‰ï¼‰
- éµå¾ªBEMå‘½åè§„èŒƒï¼ˆ.config-sectionã€.dimension-itemç­‰ï¼‰
- æ§åˆ¶æ–‡ä»¶è¡Œæ•°åœ¨500è¡Œä»¥å†…
- é¿å…ç¡¬ç¼–ç é¢œè‰²å’Œå°ºå¯¸

### 4.3 é…ç½®ç®¡ç†ç•Œé¢JavaScript
**æ–‡ä»¶**ï¼š`public/js/modules/performance-config.js`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `init()` - åˆå§‹åŒ–æ¨¡å—
- `openConfigModal()` - æ‰“å¼€é…ç½®å¯¹è¯æ¡†å¹¶åŠ è½½å½“å‰é…ç½®
- `closeConfigModal()` - å…³é—­é…ç½®å¯¹è¯æ¡†
- `renderDimensions()` - æ¸²æŸ“ç»´åº¦åˆ—è¡¨
- `renderGradeRules()` - æ¸²æŸ“ç­‰çº§è§„åˆ™åˆ—è¡¨
- `updateDimension(index, field, value)` - æ›´æ–°ç»´åº¦ä¿¡æ¯
- `updateGradeRule(index, field, value)` - æ›´æ–°ç­‰çº§è§„åˆ™
- `addDimension()` - æ·»åŠ æ–°ç»´åº¦
- `removeDimension(index)` - åˆ é™¤ç»´åº¦
- `addGradeRule()` - æ·»åŠ æ–°ç­‰çº§è§„åˆ™
- `removeGradeRule(index)` - åˆ é™¤ç­‰çº§è§„åˆ™
- `updateTotalWeight()` - æ›´æ–°æƒé‡æ€»å’Œæ˜¾ç¤º
- `resetToDefault()` - é‡ç½®ä¸ºé»˜è®¤é…ç½®
- `saveConfig()` - ä¿å­˜é…ç½®åˆ°æœåŠ¡å™¨

### 4.4 æ¨¡å—é›†æˆ
**æ–‡ä»¶**ï¼š`public/js/modules/performance.js`

**ä¿®æ”¹**ï¼šæ›´æ–°showConfigDialogæ–¹æ³•è°ƒç”¨é…ç½®æ¨¡å—
```javascript
showConfigDialog() {
    if (window.App.Modules.PerformanceConfig) {
        window.App.Modules.PerformanceConfig.openConfigModal();
    } else {
        alert('ç»©æ•ˆè¯„ä»·é…ç½®ç®¡ç†æ¨¡å—æœªåŠ è½½');
    }
}
```

### 4.5 HTMLå¼•ç”¨
**æ–‡ä»¶**ï¼š`public/index.html`

**ä¿®æ”¹**ï¼šæ·»åŠ é…ç½®ç®¡ç†æ¨¡å—å¼•ç”¨
```html
<link rel="stylesheet" href="css/modules/performance-config.css?v=20250115">
<script src="js/modules/performance-config.js?v=20250115"></script>
```

### 4.6 åˆ›å»ºè¯„ä»·å‘¨æœŸå¯¹è¯æ¡†ä¼˜åŒ–

#### ä¼˜åŒ–å†…å®¹
- åˆ›å»ºåˆ†æ­¥å¼åˆ›å»ºè¯„ä»·å‘¨æœŸå¯¹è¯æ¡†
- æ­¥éª¤1ï¼šé€‰æ‹©å‘¨æœŸç±»å‹ï¼ˆæœˆåº¦/å­£åº¦/å¹´åº¦/è‡ªå®šä¹‰ï¼‰
- æ­¥éª¤2ï¼šæ ¹æ®ç±»å‹æ˜¾ç¤ºç›¸åº”æ—¥æœŸé€‰æ‹©å™¨
- è‡ªåŠ¨è®¡ç®—å¼€å§‹å’Œç»“æŸæ—¥æœŸ
- å®æ—¶é¢„è§ˆè¯„ä»·å‘¨æœŸä¿¡æ¯

#### ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- æœˆåº¦ï¼šé€‰æ‹©å¹´ä»½å’Œæœˆä»½ï¼Œè‡ªåŠ¨è®¡ç®—è¯¥æœˆèµ·å§‹å’Œç»“æŸæ—¥æœŸ
- å­£åº¦ï¼šé€‰æ‹©å¹´ä»½å’Œå­£åº¦ï¼Œè‡ªåŠ¨è®¡ç®—è¯¥å­£åº¦èµ·å§‹å’Œç»“æŸæ—¥æœŸ
- å¹´åº¦ï¼šé€‰æ‹©å¹´ä»½ï¼Œè‡ªåŠ¨è®¡ç®—è¯¥å¹´èµ·å§‹å’Œç»“æŸæ—¥æœŸ
- è‡ªå®šä¹‰ï¼šæ‰‹åŠ¨è¾“å…¥å‘¨æœŸåç§°å’Œæ—¥æœŸèŒƒå›´
- å¹´ä»½é€‰æ‹©å™¨è‡ªåŠ¨ç”Ÿæˆå‰å5å¹´é€‰é¡¹
- æ·»åŠ åŠ¨ç”»æ•ˆæœï¼Œæå‡äº¤äº’ä½“éªŒ

#### CSSå‘½åå†²çªä¿®å¤
- å°†`.modal`é‡å‘½åä¸º`.performance-modal`
- å°†`.modal-content`é‡å‘½åä¸º`.performance-modal-content`
- å°†`.modal-header`é‡å‘½åä¸º`.performance-modal-header`
- å°†`.modal-body`é‡å‘½åä¸º`.performance-modal-body`
- é¿å…ä¸`documents.css`çš„`.modal`ç±»å†²çª
- ç§»é™¤æ‰€æœ‰`!important`å£°æ˜

---

## Gitæäº¤è®°å½•

### æäº¤1ï¼šæ•°æ®åº“å’Œåç«¯åŸºç¡€
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µä¸€ - æ•°æ®åº“å’Œåç«¯åŸºç¡€
```
**æ–‡ä»¶**ï¼š
- server/models/PerformanceEvaluation.js
- server/models/PerformanceEvaluationDetail.js
- server/database/config.js
- server/services/performance-evaluation-service.js
- server/services/quality-data-extraction-service.js
- server/services/evaluation-config-service.js
- server/routes/evaluations.js
- server/routes/evaluation-config.js
- server/index.js

### æäº¤2ï¼šè¯„ä»·åŠŸèƒ½å®ç°
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µäºŒ - è¯„ä»·åŠŸèƒ½å®ç°
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css
- public/js/modules/performance.js
- public/js/app.js

### æäº¤3ï¼šCSSé‡æ„
```
refactor: é‡æ„performance-evaluation.cssï¼Œéµå¾ªCLAUDE.md CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
```
**æ–‡ä»¶**ï¼š
- public/css/modules/performance-evaluation.css
- docs/plans/2025-01-14-implementation-plan.md

### æäº¤4ï¼šå‘½åé‡æ„
```
refactor: å°†ç»©æ•ˆè¯„ä»·æ¨¡å—ä¸­çš„vendorå‘½åæ›¿æ¢ä¸ºevaluation-entityï¼Œé¿å¼€ä¾›åº”å•†é…ç½®ä¸­å¿ƒçš„å‘½å
```
**æ–‡ä»¶**ï¼š
- server/models/PerformanceEvaluationDetail.js
- server/services/performance-evaluation-service.js
- server/routes/evaluations.js
- public/js/modules/performance.js
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤5ï¼šä¸»ç•Œé¢å±•ç¤º
```
feat: å®ç°ä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µä¸‰ï¼šä¸»ç•Œé¢å±•ç¤º
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-dashboard.css
- public/js/modules/performance-dashboard.js
- public/js/modules/performance.js

### æäº¤6ï¼šè®¤è¯ä¿®å¤
```
fix: ä¿®å¤ç»©æ•ˆè¯„ä»·æ¨¡å—401è®¤è¯é”™è¯¯
```
**æ–‡ä»¶**ï¼š
- public/js/modules/performance.js
- public/js/modules/performance-dashboard.js

### æäº¤7ï¼šè®¤è¯å®Œå–„
```
fix: ç§»é™¤ç»©æ•ˆè¯„ä»·æ¨¡å—çš„ç®€åŒ–è®¤è¯ï¼Œä½¿ç”¨å®Œæ•´çš„AuthServiceéªŒè¯
```
**æ–‡ä»¶**ï¼š
- server/routes/evaluations.js
- server/routes/evaluation-config.js

### æäº¤8ï¼šåˆ›å»ºè¯„ä»·å‘¨æœŸå¯¹è¯æ¡†ä¼˜åŒ–
```
feat: ä¼˜åŒ–åˆ›å»ºè¯„ä»·å‘¨æœŸæµç¨‹ï¼Œæ·»åŠ å¯è§†åŒ–å¯¹è¯æ¡†
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css
- public/js/modules/performance.js

### æäº¤9ï¼šç‰ˆæœ¬å·æ›´æ–°
```
fix: ä¿®å¤åˆ›å»ºè¯„ä»·å‘¨æœŸæŒ‰é’®æ— å“åº”é—®é¢˜
```
**æ–‡ä»¶**ï¼š
- public/index.html

### æäº¤10ï¼šè°ƒè¯•æ—¥å¿—
```
fix: æ·»åŠ è°ƒè¯•æ—¥å¿—å’Œnullæ£€æŸ¥ï¼Œä¿®å¤äº‹ä»¶ç»‘å®šé—®é¢˜
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/js/modules/performance.js

### æäº¤11ï¼šCSSä¼˜å…ˆçº§ä¿®å¤
```
fix: ä¿®å¤modalå¯¹è¯æ¡†ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼Œæ·»åŠ !importantè¦†ç›–documents.cssçš„æ ·å¼
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤12ï¼šç±»åé‡å‘½å
```
fix: é‡å‘½åmodalç±»åé¿å…ä¸documents.csså†²çªï¼Œç§»é™¤!important
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤13ï¼šCSSæ–‡ä»¶å¯¹åº”å…³ç³»
```
docs: æ·»åŠ CSSæ–‡ä»¶ä¸æ¨¡å—å¯¹åº”å…³ç³»åˆ°CLAUDE.md
```
**æ–‡ä»¶**ï¼š
- CLAUDE.md

### æäº¤14ï¼šé…ç½®ç®¡ç†ç•Œé¢
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µå›› - é…ç½®ç®¡ç†ç•Œé¢
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-config.css
- public/js/modules/performance-config.js
- public/js/modules/performance.js

---

## å·²å®ŒæˆåŠŸèƒ½

### âœ… æ•°æ®åº“å’Œåç«¯
- PerformanceEvaluationå’ŒPerformanceEvaluationDetailæ¨¡å‹
- PerformanceEvaluationServiceï¼ˆè¯„ä»·ä¸šåŠ¡é€»è¾‘ï¼‰
- QualityDataExtractionServiceï¼ˆè´¨é‡æ•°æ®æå–ï¼‰
- EvaluationConfigServiceï¼ˆé…ç½®ç®¡ç†ï¼‰
- è¯„ä»·APIè·¯ç”±ï¼ˆå‘¨æœŸç®¡ç†ã€è¯„ä»·æ“ä½œã€æ•°æ®æŸ¥è¯¢ï¼‰
- é…ç½®APIè·¯ç”±ï¼ˆé…ç½®ç®¡ç†ï¼‰

### âœ… è¯„ä»·åŠŸèƒ½
- è¯„ä»·ç•Œé¢HTMLç»“æ„
- è¯„ä»·ç•Œé¢CSSæ ·å¼ï¼ˆç¬¦åˆCSSæ¶æ„åŸåˆ™ï¼‰
- è¯„ä»·ç•Œé¢JavaScriptåŠŸèƒ½
- åˆ›å»ºè¯„ä»·å‘¨æœŸï¼ˆåˆ†æ­¥å¼å¯¹è¯æ¡†ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼‰
- å¼€å§‹è¯„ä»·ï¼ˆåŠ è½½è¯„ä»·å®ä½“åˆ—è¡¨ï¼Œé¢„è®¡ç®—è´¨é‡æ•°æ®ï¼‰
- é€ä¸ªè¯„ä»·è¯„ä»·å®ä½“
- ä¸­é€”ä¿å­˜è¯„ä»·
- æäº¤è¯„ä»·

### âœ… ä¸»ç•Œé¢å±•ç¤º
- åˆ†å±‚å¼ä»ªè¡¨ç›˜å¸ƒå±€
- é¡¶éƒ¨ç»Ÿè®¡åŒºï¼ˆå¹³å‡æ€»åˆ†ã€ç­‰çº§åˆ†å¸ƒã€å…³é”®æŒ‡æ ‡ï¼‰
- ä¸­éƒ¨å›¾è¡¨åŒºï¼ˆè¶‹åŠ¿å›¾ã€åˆ†å¸ƒå›¾ã€é›·è¾¾å›¾ï¼‰
- åº•éƒ¨è¡¨æ ¼åŒºï¼ˆæ’åã€å„ç»´åº¦è¿›åº¦æ¡ã€è¶‹åŠ¿ï¼‰
- Chart.jsæ•°æ®å¯è§†åŒ–é›†æˆ

### âœ… é…ç½®ç®¡ç†
- é…ç½®ç®¡ç†ç•Œé¢HTMLç»“æ„
- é…ç½®ç®¡ç†ç•Œé¢CSSæ ·å¼ï¼ˆç¬¦åˆCSSæ¶æ„åŸåˆ™ï¼‰
- é…ç½®ç®¡ç†ç•Œé¢JavaScriptåŠŸèƒ½
- ç»´åº¦ç®¡ç†ï¼ˆæ·»åŠ /åˆ é™¤/ä¿®æ”¹è¯„ä»·ç»´åº¦ï¼‰
- ç­‰çº§è§„åˆ™é…ç½®ï¼ˆæ·»åŠ /åˆ é™¤/ä¿®æ”¹ç­‰çº§è§„åˆ™ï¼‰
- æƒé‡æ€»å’ŒéªŒè¯ï¼ˆå¿…é¡»ä¸º1ï¼‰
- é…ç½®ä¿å­˜å’Œè¯»å–
- é‡ç½®ä¸ºé»˜è®¤é…ç½®

### âœ… ä»£ç è´¨é‡
- CSSéµå¾ªCLAUDE.mdè§„èŒƒ
- å‘½åç©ºé—´æ¸…æ™°ï¼ˆevaluation-entity vs vendorï¼‰
- ä»£ç æ³¨é‡Šå®Œå–„
- é”™è¯¯å¤„ç†å®Œæ•´
- è®¤è¯æœºåˆ¶å®Œå–„
- æ¨¡å—åŒ–æ¶æ„æ¸…æ™°

---

## å¾…å®ç°åŠŸèƒ½

### âœ… æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆ
- æ•°æ®åº“å’Œåç«¯åŸºç¡€
- è¯„ä»·åŠŸèƒ½å®ç°
- ä¸»ç•Œé¢å±•ç¤º
- é…ç½®ç®¡ç†ç•Œé¢

---

## æŠ€æœ¯äº®ç‚¹

1. **é¢„è®¡ç®—ç¼“å­˜**ï¼šè´¨é‡æ•°æ®é¢„è®¡ç®—å¹¶ç¼“å­˜ï¼Œé¿å…é‡å¤æŸ¥è¯¢IQCData
2. **å¿«ç…§æœºåˆ¶**ï¼šè¯„ä»·ç»“æœä¿å­˜ä¸ºå¿«ç…§ï¼Œä¸å—åç»­æ•°æ®å˜æ›´å½±å“
3. **çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰è¯„ä»·ç»´åº¦ã€æƒé‡ã€ç­‰çº§è§„åˆ™
4. **JSONå­—æ®µ**ï¼šä½¿ç”¨JSONå­—æ®µå­˜å‚¨è‡ªå®šä¹‰ç»´åº¦å’Œåˆ†æ•°ï¼Œæ”¯æŒçµæ´»æ‰©å±•
5. **CSSå˜é‡ä½“ç³»**ï¼šéµå¾ªCLAUDE.mdè§„èŒƒï¼Œä½¿ç”¨CSSå˜é‡æ›¿ä»£ç¡¬ç¼–ç 
6. **å‘½åç©ºé—´éš”ç¦»**ï¼ševaluation-entityå‘½åä¸vendoré…ç½®ä¸­å¿ƒåŒºåˆ†
7. **æ•°æ®å¯è§†åŒ–**ï¼šä½¿ç”¨Chart.jså®ç°ç­‰çº§åˆ†å¸ƒå›¾ã€é›·è¾¾å›¾ç­‰å¯è§†åŒ–å±•ç¤º
8. **æ¨¡å—åŒ–æ¶æ„**ï¼šä¸»ç•Œé¢æ¨¡å—ç‹¬ç«‹å°è£…ï¼Œè‡ªåŠ¨åˆå§‹åŒ–ï¼Œä¾¿äºç»´æŠ¤
9. **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒä¸åŒå±å¹•å°ºå¯¸ï¼Œé€‚é…å„ç§è®¾å¤‡
10. **æ’åç³»ç»Ÿ**ï¼šè‡ªåŠ¨è®¡ç®—æ’åï¼Œæ˜¾ç¤ºå‰ä¸‰åç‰¹æ®Šå¾½ç« 
11. **åˆ†æ­¥å¼å¯¹è¯æ¡†**ï¼šåˆ›å»ºè¯„ä»·å‘¨æœŸä½¿ç”¨åˆ†æ­¥å¼å¯¹è¯æ¡†ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
12. **è‡ªåŠ¨æ—¥æœŸè®¡ç®—**ï¼šæ ¹æ®é€‰æ‹©çš„å‘¨æœŸç±»å‹è‡ªåŠ¨è®¡ç®—æ—¥æœŸèŒƒå›´
13. **å®æ—¶é…ç½®éªŒè¯**ï¼šæƒé‡æ€»å’Œå®æ—¶æ˜¾ç¤ºå¹¶éªŒè¯ï¼Œç¡®ä¿é…ç½®æœ‰æ•ˆæ€§
14. **é…ç½®å¿«ç…§**ï¼šè¯„ä»·æ—¶ä¿å­˜é…ç½®å¿«ç…§ï¼Œç¡®ä¿è¯„ä»·ç»“æœä¸å—åç»­é…ç½®å˜æ›´å½±å“
15. **CSSå‘½åå†²çªè§£å†³**ï¼šé€šè¿‡ç±»åé‡å‘½åé¿å…ä¸documents.cssçš„.modalç±»å†²çª

---

## è®¾è®¡æ–‡æ¡£

- **è®¾è®¡æ–‡æ¡£**ï¼š`docs/plans/2025-01-14-supplier-performance-evaluation-design.md`
- **éœ€æ±‚æ•´ç†**ï¼š`docs/plans/2025-01-14-requirements-summary.md`
- **å®æ–½è®¡åˆ’**ï¼š`docs/plans/2025-01-14-implementation-plan.md`

---

## Bugä¿®å¤è®°å½•

### Bug 1ï¼šåˆ›å»ºè¯„ä»·å‘¨æœŸå¯¹è¯æ¡†ä¸æ˜¾ç¤º
**é”™è¯¯ç°è±¡**ï¼šç‚¹å‡»"åˆ›å»ºè¯„ä»·å‘¨æœŸ"æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”ï¼Œå¯¹è¯æ¡†ä¸æ˜¾ç¤º
**é”™è¯¯åŸå› **ï¼šCSSå‘½åå†²çªï¼Œ`documents.css`çš„`.modal`ç±»ä½¿ç”¨äº†`display: none !important`ï¼Œå¯¼è‡´`performance-evaluation.css`çš„`.modal`æ ·å¼æ— æ³•ç”Ÿæ•ˆ
**é”™è¯¯æ—¥å¿—**ï¼šæ— é”™è¯¯æ—¥å¿—ï¼Œä½†ç”¨æˆ·åé¦ˆ"ä¾ç„¶æ²¡æœ‰å¼¹å‡ºï¼Œä¸è¦è€ƒè™‘ç¼“å­˜å’Œæˆ‘æ“ä½œçš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ç”¨çš„æ˜¯æ— ç—•æ¨¡å¼"

**ä¿®å¤æ–¹æ³•**ï¼š
1. é‡å‘½å`performance-evaluation.css`ä¸­çš„æ‰€æœ‰`.modal`ç±»åä¸º`.performance-modal`
2. é‡å‘½å`.modal-content`ä¸º`.performance-modal-content`
3. é‡å‘½å`.modal-header`ä¸º`.performance-modal-header`
4. é‡å‘½å`.modal-body`ä¸º`.performance-modal-body`
5. é‡å‘½å`.modal-footer`ä¸º`.performance-modal-footer`
6. ç§»é™¤æ‰€æœ‰`!important`å£°æ˜ï¼Œé¿å…ä¼˜å…ˆçº§æˆ˜äº‰

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `public/index.html` - æ›´æ–°HTMLç»“æ„ä¸­çš„ç±»å
- `public/css/modules/performance-evaluation.css` - æ›´æ–°CSSé€‰æ‹©å™¨

**ç”¨æˆ·åé¦ˆ**ï¼š"ä¾ç„¶æ²¡æœ‰å¼¹å‡ºï¼Œä¸è¦è€ƒè™‘ç¼“å­˜å’Œæˆ‘æ“ä½œçš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ç”¨çš„æ˜¯æ— ç—•æ¨¡å¼"

---

### Bug 2ï¼š401 Unauthorizedé”™è¯¯
**é”™è¯¯ç°è±¡**ï¼š`GET http://localhost:8888/api/evaluation-config 401 (Unauthorized)`
**é”™è¯¯åŸå› **ï¼šå‰ç«¯è¯·æ±‚ç¼ºå°‘è®¤è¯tokenï¼Œåç«¯APIéœ€è¦Bearer Tokenè®¤è¯
**é”™è¯¯æ—¥å¿—**ï¼š
```
GET http://localhost:8888/api/evaluation-config 401 (Unauthorized)
```

**ä¿®å¤æ–¹æ³•**ï¼š
1. åœ¨`performance.js`ä¸­æ·»åŠ `authenticatedFetch`è¾…åŠ©å‡½æ•°
2. åœ¨`performance-dashboard.js`ä¸­æ·»åŠ `authenticatedFetch`è¾…åŠ©å‡½æ•°
3. è‡ªåŠ¨ä»localStorageè·å–`authToken`
4. åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ `Authorization: Bearer {token}`

**ä»£ç ç¤ºä¾‹**ï¼š
```javascript
async authenticatedFetch(url, options = {}) {
    const token = localStorage.getItem('authToken');
    const headers = {
        'Content-Type': 'application/json',
        ...options.headers
    };
    if (token) {
        headers['Authorization'] = `Bearer ${token}`;
    }
    return fetch(url, {
        ...options,
        headers
    });
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `public/js/modules/performance.js` - æ·»åŠ authenticatedFetchå‡½æ•°
- `public/js/modules/performance-dashboard.js` - æ·»åŠ authenticatedFetchå‡½æ•°

**ç”¨æˆ·åé¦ˆ**ï¼šæ— 

---

### Bug 3ï¼šç®€åŒ–è®¤è¯é—®é¢˜
**é”™è¯¯ç°è±¡**ï¼šåç«¯ä½¿ç”¨äº†ç®€åŒ–è®¤è¯ï¼Œè·³è¿‡äº†tokenéªŒè¯
**é”™è¯¯åŸå› **ï¼šåˆå§‹å®ç°ä½¿ç”¨äº†ç®€åŒ–è®¤è¯ä¾¿äºå¼€å‘ï¼Œä½†ä¸ç¬¦åˆç”Ÿäº§ç¯å¢ƒè¦æ±‚
**é”™è¯¯æ—¥å¿—**ï¼šæ— 

**ä¿®å¤æ–¹æ³•**ï¼š
1. ç§»é™¤`evaluations.js`ä¸­çš„ç®€åŒ–è®¤è¯
2. ç§»é™¤`evaluation-config.js`ä¸­çš„ç®€åŒ–è®¤è¯
3. ä½¿ç”¨å®Œæ•´çš„`AuthService.verifyToken`éªŒè¯token
4. ç¡®ä¿æ‰€æœ‰APIè·¯ç”±éƒ½ç»è¿‡è®¤è¯

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `server/routes/evaluations.js` - ä½¿ç”¨AuthService.verifyToken
- `server/routes/evaluation-config.js` - ä½¿ç”¨AuthService.verifyToken

**ç”¨æˆ·åé¦ˆ**ï¼š"ä¸å…è®¸ç®€åŒ–è®¤è¯"

---

### Bug 4ï¼šå‘½åå†²çª
**é”™è¯¯ç°è±¡**ï¼šç”¨æˆ·æŒ‡å‡º"vendorä¸è¦ç”¨è¿™ä¸ªï¼Œè¿™ä¸ªæ˜¯ä»£è¡¨ç€ä¾›åº”å•†é…ç½®ä¸­å¿ƒçš„å‘½åã€‚éœ€è¦é¿å¼€"
**é”™è¯¯åŸå› **ï¼šç»©æ•ˆè¯„ä»·æ¨¡å—ä½¿ç”¨äº†`vendor`å‘½åï¼Œä¸ä¾›åº”å•†é…ç½®ä¸­å¿ƒçš„å‘½åå†²çª
**é”™è¯¯æ—¥å¿—**ï¼šæ— 

**ä¿®å¤æ–¹æ³•**ï¼š
1. åç«¯ï¼šå°†`vendor_name`æ”¹ä¸º`evaluation_entity_name`
2. åç«¯ï¼šå°†`getEvaluationVendors()`æ”¹ä¸º`getEvaluationEntities()`
3. åç«¯ï¼šå°†`saveVendorEvaluation()`æ”¹ä¸º`saveEntityEvaluation()`
4. åç«¯ï¼šå°†`getTrendData(vendorName)`æ”¹ä¸º`getTrendData(entityName)`
5. APIè·¯ç”±ï¼šå°†`/api/evaluations/:id/vendors`æ”¹ä¸º`/api/evaluations/:id/entities`
6. APIè·¯ç”±ï¼šå°†`/api/evaluations/:id/vendors/:vendorName`æ”¹ä¸º`/api/evaluations/:id/entities/:entityName`
7. APIè·¯ç”±ï¼šå°†`/api/evaluations/trend/:vendorName`æ”¹ä¸º`/api/evaluations/trend/:entityName`
8. å‰ç«¯ï¼šå°†`state.currentVendor`æ”¹ä¸º`state.currentEntity`
9. å‰ç«¯ï¼šå°†`state.vendors`æ”¹ä¸º`state.entities`
10. å‰ç«¯ï¼šå°†`renderVendorCards()`æ”¹ä¸º`renderEntityCards()`
11. å‰ç«¯ï¼šå°†`openSidebar(vendor)`æ”¹ä¸º`openSidebar(entity)`
12. HTMLï¼šå°†`evaluationVendorCount`æ”¹ä¸º`evaluationEntityCount`
13. HTMLï¼šå°†`vendorCardsList`æ”¹ä¸º`entityCardsList`
14. HTMLï¼šå°†`sidebarVendorName`æ”¹ä¸º`sidebarEntityName`
15. CSSï¼šå°†`.vendor-card`æ”¹ä¸º`.entity-card`
16. CSSï¼šå°†`.vendor-cards`æ”¹ä¸º`.entity-cards`

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `server/models/PerformanceEvaluationDetail.js`
- `server/services/performance-evaluation-service.js`
- `server/routes/evaluations.js`
- `public/js/modules/performance.js`
- `public/index.html`
- `public/css/modules/performance-evaluation.css`

**ç”¨æˆ·åé¦ˆ**ï¼š"vendorä¸è¦ç”¨è¿™ä¸ªï¼Œè¿™ä¸ªæ˜¯ä»£è¡¨ç€ä¾›åº”å•†é…ç½®ä¸­å¿ƒçš„å‘½åã€‚éœ€è¦é¿å¼€"

---

### Bug 5ï¼šåˆ›å»ºè¯„ä»·å‘¨æœŸæµç¨‹å¤æ‚
**é”™è¯¯ç°è±¡**ï¼šç”¨æˆ·åé¦ˆ"è¿™æ ·æ„Ÿè§‰å¾ˆå¤æ‚"
**é”™è¯¯åŸå› **ï¼šéœ€è¦æ‰‹åŠ¨è¾“å…¥å‘¨æœŸåç§°ã€ç±»å‹ã€å¼€å§‹æ—¥æœŸã€ç»“æŸæ—¥æœŸï¼Œæ“ä½œæ­¥éª¤å¤š
**é”™è¯¯æ—¥å¿—**ï¼šæ— 

**ä¿®å¤æ–¹æ³•**ï¼š
1. åˆ›å»ºåˆ†æ­¥å¼åˆ›å»ºè¯„ä»·å‘¨æœŸå¯¹è¯æ¡†
2. æ­¥éª¤1ï¼šé€‰æ‹©å‘¨æœŸç±»å‹ï¼ˆæœˆåº¦/å­£åº¦/å¹´åº¦/è‡ªå®šä¹‰ï¼‰
3. æ­¥éª¤2ï¼šæ ¹æ®ç±»å‹æ˜¾ç¤ºç›¸åº”æ—¥æœŸé€‰æ‹©å™¨
4. è‡ªåŠ¨è®¡ç®—å¼€å§‹å’Œç»“æŸæ—¥æœŸ
5. å®æ—¶é¢„è§ˆè¯„ä»·å‘¨æœŸä¿¡æ¯
6. æ·»åŠ åŠ¨ç”»æ•ˆæœï¼Œæå‡äº¤äº’ä½“éªŒ

**ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼š
- æœˆåº¦ï¼šé€‰æ‹©å¹´ä»½å’Œæœˆä»½ï¼Œè‡ªåŠ¨è®¡ç®—è¯¥æœˆèµ·å§‹å’Œç»“æŸæ—¥æœŸ
- å­£åº¦ï¼šé€‰æ‹©å¹´ä»½å’Œå­£åº¦ï¼Œè‡ªåŠ¨è®¡ç®—è¯¥å­£åº¦èµ·å§‹å’Œç»“æŸæ—¥æœŸ
- å¹´åº¦ï¼šé€‰æ‹©å¹´ä»½ï¼Œè‡ªåŠ¨è®¡ç®—è¯¥å¹´èµ·å§‹å’Œç»“æŸæ—¥æœŸ
- è‡ªå®šä¹‰ï¼šæ‰‹åŠ¨è¾“å…¥å‘¨æœŸåç§°å’Œæ—¥æœŸèŒƒå›´
- å¹´ä»½é€‰æ‹©å™¨è‡ªåŠ¨ç”Ÿæˆå‰å5å¹´é€‰é¡¹

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `public/index.html` - æ·»åŠ åˆ†æ­¥å¼å¯¹è¯æ¡†HTML
- `public/css/modules/performance-evaluation.css` - æ·»åŠ å¯¹è¯æ¡†æ ·å¼
- `public/js/modules/performance.js` - æ·»åŠ åˆ†æ­¥å¼é€»è¾‘

**ç”¨æˆ·åé¦ˆ**ï¼š"åº”è¯¥å…ˆé€‰æ‹©å‘¨æœŸç±»å‹,æ¯”å¦‚è¯´æœˆ,æˆ–è€…å­£åº¦,æˆ–è€…å¹´ï¼Œæ ¹æ®é€‰æ‹©çš„ä¸åŒï¼Œè·³è½¬ä¸åŒçš„æ—¥æœŸé€‰æ‹©å™¨"

---

### Bug 6ï¼šAPI URLé”™è¯¯å’Œè·¯ç”±é¡ºåºé—®é¢˜
**é”™è¯¯ç°è±¡**ï¼š`GET http://localhost:8888/api/evaluations/config 400 (Bad Request)` å’Œ "åŠ è½½é…ç½®å¤±è´¥ï¼šæ— æ•ˆçš„è¯„ä»·å‘¨æœŸID"
**é”™è¯¯åŸå› 1**ï¼š`performance-config.js`ä¸­ä½¿ç”¨äº†é”™è¯¯çš„API URL `/api/evaluations/config`ï¼Œåº”è¯¥æ˜¯`/api/evaluation-config`
**é”™è¯¯åŸå› 2**ï¼šè·¯ç”±æ³¨å†Œé¡ºåºé”™è¯¯ï¼Œ`/api/evaluations`å…ˆæ³¨å†Œï¼Œå¯¼è‡´`/api/evaluation-config`è¯·æ±‚è¢«é”™è¯¯åŒ¹é…åˆ°`/api/evaluations/:id`è·¯ç”±
**é”™è¯¯æ—¥å¿—**ï¼š
```
GET http://localhost:8888/api/evaluations/config 400 (Bad Request)
åŠ è½½é…ç½®å¤±è´¥ï¼šæ— æ•ˆçš„è¯„ä»·å‘¨æœŸID
```

**ä¿®å¤æ–¹æ³•**ï¼š
1. ä¿®æ­£`performance-config.js`ä¸­çš„API URLï¼š
   - `/api/evaluations/config` â†’ `/api/evaluation-config`
2. è°ƒæ•´`server/index.js`ä¸­çš„è·¯ç”±æ³¨å†Œé¡ºåºï¼š
   - å°†`/api/evaluation-config`æ”¾åœ¨`/api/evaluations`ä¹‹å‰
   - ç¡®ä¿æ›´å…·ä½“çš„è·¯ç”±å…ˆæ³¨å†Œ

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `public/js/modules/performance-config.js` - ä¿®æ­£API URL
- `server/index.js` - è°ƒæ•´è·¯ç”±æ³¨å†Œé¡ºåº

**ç”¨æˆ·åé¦ˆ**ï¼š"åŠ è½½é…ç½®å¤±è´¥ï¼šæ— æ•ˆçš„è¯„ä»·å‘¨æœŸID"

---

### Bug 7ï¼šNaNé”™è¯¯
**é”™è¯¯ç°è±¡**ï¼š`SQLITE_ERROR: no such column: NaN`ï¼ŒSQLæŸ¥è¯¢`WHERE PerformanceEvaluation.id = NaN`
**é”™è¯¯åŸå› **ï¼š`evaluation.id`ä¸ºundefined/nullï¼Œå¯¼è‡´`parseInt(undefined)`è¿”å›NaNï¼Œä¼ é€’ç»™æ•°æ®åº“æŸ¥è¯¢
**é”™è¯¯æ—¥å¿—**ï¼š
```
SQLITE_ERROR: no such column: NaN
SQL: SELECT * FROM "PerformanceEvaluations" WHERE "PerformanceEvaluation"."id" = NaN
```

**ä¿®å¤æ–¹æ³•**ï¼š
1. åœ¨`renderPeriodsList`æ–¹æ³•ä¸­æ·»åŠ nullæ£€æŸ¥
2. åªæœ‰å½“`evaluation.id`å­˜åœ¨æ—¶æ‰æ¸²æŸ“æŒ‰é’®
3. åœ¨`startEvaluation`æ–¹æ³•ä¸­æ·»åŠ å‚æ•°éªŒè¯
4. åœ¨åç«¯è·¯ç”±ä¸­æ·»åŠ IDéªŒè¯å‡½æ•°

**ä»£ç ç¤ºä¾‹**ï¼š
```javascript
// å‰ç«¯nullæ£€æŸ¥
renderPeriodsList(evaluations) {
    evaluations.forEach(evaluation => {
        item.innerHTML = `
            ${evaluation.status === 'draft' && evaluation.id ? `<button>å¼€å§‹è¯„ä»·</button>` : ''}
            ${evaluation.status === 'in_progress' && evaluation.id ? `<button>ç»§ç»­è¯„ä»·</button>` : ''}
        `;
    });
}

// åç«¯IDéªŒè¯
const parseAndValidateId = (id, res) => {
    const parsedId = parseInt(id);
    if (isNaN(parsedId)) {
        res.status(400).json({
            success: false,
            message: 'æ— æ•ˆçš„è¯„ä»·å‘¨æœŸID'
        });
        return null;
    }
    return parsedId;
};
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `public/js/modules/performance.js` - æ·»åŠ nullæ£€æŸ¥
- `server/routes/evaluations.js` - æ·»åŠ IDéªŒè¯å‡½æ•°

**ç”¨æˆ·åé¦ˆ**ï¼šæ— 

---

### Bug 8ï¼šæ— æ³•ç»§ç»­è¯„ä»·
**é”™è¯¯ç°è±¡**ï¼šç”¨æˆ·åé¦ˆ"å‡ºæ¥ä¹‹åå°±æ— æ³•å†è¿›å»äº†"
**é”™è¯¯åŸå› **ï¼š`in_progress`çŠ¶æ€çš„è¯„ä»·å‘¨æœŸæ²¡æœ‰æ“ä½œæŒ‰é’®ï¼Œç”¨æˆ·æ— æ³•ç»§ç»­è¯„ä»·
**é”™è¯¯æ—¥å¿—**ï¼šæ— 

**ä¿®å¤æ–¹æ³•**ï¼š
1. åœ¨`renderPeriodsList`æ–¹æ³•ä¸­ä¸º`in_progress`çŠ¶æ€æ·»åŠ "ç»§ç»­è¯„ä»·"æŒ‰é’®
2. ä¿®æ”¹`startEvaluation`æ–¹æ³•é€»è¾‘ï¼Œæ”¯æŒ`in_progress`çŠ¶æ€

**ä»£ç ç¤ºä¾‹**ï¼š
```javascript
renderPeriodsList(evaluations) {
    evaluations.forEach(evaluation => {
        item.innerHTML = `
            ${evaluation.status === 'draft' && evaluation.id ? `<button>å¼€å§‹è¯„ä»·</button>` : ''}
            ${evaluation.status === 'in_progress' && evaluation.id ? `<button>ç»§ç»­è¯„ä»·</button>` : ''}
            ${evaluation.status === 'completed' && evaluation.id ? `<button>æŸ¥çœ‹ç»“æœ</button>` : ''}
        `;
    });
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `public/js/modules/performance.js` - æ·»åŠ ç»§ç»­è¯„ä»·æŒ‰é’®

**ç”¨æˆ·åé¦ˆ**ï¼š"å‡ºæ¥ä¹‹åå°±æ— æ³•å†è¿›å»äº†"

---

### Bug 9ï¼šè¯„ä»·å‘¨æœŸå·²å¼€å§‹æˆ–å·²å®Œæˆ
**é”™è¯¯ç°è±¡**ï¼š`å¼€å§‹è¯„ä»·å¤±è´¥ï¼šè¯„ä»·å‘¨æœŸå·²å¼€å§‹æˆ–å·²å®Œæˆ`
**é”™è¯¯åŸå› **ï¼š`startEvaluation`æ–¹æ³•åªå…è®¸`draft`çŠ¶æ€ï¼Œä¸å…è®¸`in_progress`çŠ¶æ€
**é”™è¯¯æ—¥å¿—**ï¼š
```
å¼€å§‹è¯„ä»·å¤±è´¥ï¼šè¯„ä»·å‘¨æœŸå·²å¼€å§‹æˆ–å·²å®Œæˆ
```

**ä¿®å¤æ–¹æ³•**ï¼š
1. ä¿®æ”¹`startEvaluation`æ–¹æ³•é€»è¾‘
2. æ”¯æŒä¸¤ç§çŠ¶æ€ï¼š
   - `draft`çŠ¶æ€ï¼šå¼€å§‹è¯„ä»·ï¼ˆåˆ›å»ºè¯„ä»·è¯¦æƒ…è®°å½•ï¼‰
   - `in_progress`çŠ¶æ€ï¼šç»§ç»­è¯„ä»·ï¼ˆè·å–å·²æœ‰çš„è¯„ä»·è¯¦æƒ…è®°å½•ï¼‰
3. å…¶ä»–çŠ¶æ€ä¸å…è®¸æ“ä½œ

**ä»£ç ç¤ºä¾‹**ï¼š
```javascript
async startEvaluation(id) {
    const transaction = await sequelize.transaction();
    try {
        const evaluation = await PerformanceEvaluation.findByPk(id);
        if (!evaluation) {
            throw new Error('è¯„ä»·å‘¨æœŸä¸å­˜åœ¨');
        }
        
        // å¦‚æœçŠ¶æ€ä¸ºdraftï¼Œå¼€å§‹è¯„ä»·
        if (evaluation.status === 'draft') {
            evaluation.status = 'in_progress';
            await evaluation.save({ transaction });
            // ... åˆ›å»ºè¯„ä»·è¯¦æƒ…è®°å½•
        } 
        // å¦‚æœçŠ¶æ€ä¸ºin_progressï¼Œç»§ç»­è¯„ä»·
        else if (evaluation.status === 'in_progress') {
            const details = await PerformanceEvaluationDetail.findAll({
                where: { evaluation_id: id },
                order: [['evaluation_entity_name', 'ASC']]
            });
            // ... è·å–å·²æœ‰è¯„ä»·è¯¦æƒ…
        }
        // å…¶ä»–çŠ¶æ€ä¸å…è®¸
        else {
            throw new Error('è¯„ä»·å‘¨æœŸå·²å®Œæˆï¼Œæ— æ³•ç»§ç»­è¯„ä»·');
        }
    } catch (error) {
        await transaction.rollback();
        throw error;
    }
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `server/services/performance-evaluation-service.js` - ä¿®æ”¹startEvaluationé€»è¾‘

**ç”¨æˆ·åé¦ˆ**ï¼šæ— 

---

## Gitæäº¤è®°å½•ï¼ˆå®Œæ•´ç‰ˆï¼‰

### æäº¤1ï¼šæ•°æ®åº“å’Œåç«¯åŸºç¡€
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µä¸€ - æ•°æ®åº“å’Œåç«¯åŸºç¡€
```
**æ–‡ä»¶**ï¼š
- server/models/PerformanceEvaluation.js
- server/models/PerformanceEvaluationDetail.js
- server/database/config.js
- server/services/performance-evaluation-service.js
- server/services/quality-data-extraction-service.js
- server/services/evaluation-config-service.js
- server/routes/evaluations.js
- server/routes/evaluation-config.js
- server/index.js

### æäº¤2ï¼šè¯„ä»·åŠŸèƒ½å®ç°
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µäºŒ - è¯„ä»·åŠŸèƒ½å®ç°
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css
- public/js/modules/performance.js
- public/js/app.js

### æäº¤3ï¼šCSSé‡æ„
```
refactor: é‡æ„performance-evaluation.cssï¼Œéµå¾ªCLAUDE.md CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
```
**æ–‡ä»¶**ï¼š
- public/css/modules/performance-evaluation.css
- docs/plans/2025-01-14-implementation-plan.md

### æäº¤4ï¼šå‘½åé‡æ„
```
refactor: å°†ç»©æ•ˆè¯„ä»·æ¨¡å—ä¸­çš„vendorå‘½åæ›¿æ¢ä¸ºevaluation-entityï¼Œé¿å¼€ä¾›åº”å•†é…ç½®ä¸­å¿ƒçš„å‘½å
```
**æ–‡ä»¶**ï¼š
- server/models/PerformanceEvaluationDetail.js
- server/services/performance-evaluation-service.js
- server/routes/evaluations.js
- public/js/modules/performance.js
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤5ï¼šä¸»ç•Œé¢å±•ç¤º
```
feat: å®ç°ä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µä¸‰ï¼šä¸»ç•Œé¢å±•ç¤º
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-dashboard.css
- public/js/modules/performance-dashboard.js
- public/js/modules/performance.js

### æäº¤6ï¼šè®¤è¯ä¿®å¤
```
fix: ä¿®å¤ç»©æ•ˆè¯„ä»·æ¨¡å—401è®¤è¯é”™è¯¯
```
**æ–‡ä»¶**ï¼š
- public/js/modules/performance.js
- public/js/modules/performance-dashboard.js

### æäº¤7ï¼šè®¤è¯å®Œå–„
```
fix: ç§»é™¤ç»©æ•ˆè¯„ä»·æ¨¡å—çš„ç®€åŒ–è®¤è¯ï¼Œä½¿ç”¨å®Œæ•´çš„AuthServiceéªŒè¯
```
**æ–‡ä»¶**ï¼š
- server/routes/evaluations.js
- server/routes/evaluation-config.js

### æäº¤8ï¼šåˆ›å»ºè¯„ä»·å‘¨æœŸå¯¹è¯æ¡†ä¼˜åŒ–
```
feat: ä¼˜åŒ–åˆ›å»ºè¯„ä»·å‘¨æœŸæµç¨‹ï¼Œæ·»åŠ å¯è§†åŒ–å¯¹è¯æ¡†
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css
- public/js/modules/performance.js

### æäº¤9ï¼šç‰ˆæœ¬å·æ›´æ–°
```
fix: ä¿®å¤åˆ›å»ºè¯„ä»·å‘¨æœŸæŒ‰é’®æ— å“åº”é—®é¢˜
```
**æ–‡ä»¶**ï¼š
- public/index.html

### æäº¤10ï¼šè°ƒè¯•æ—¥å¿—
```
fix: æ·»åŠ è°ƒè¯•æ—¥å¿—å’Œnullæ£€æŸ¥ï¼Œä¿®å¤äº‹ä»¶ç»‘å®šé—®é¢˜
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/js/modules/performance.js

### æäº¤11ï¼šCSSä¼˜å…ˆçº§ä¿®å¤
```
fix: ä¿®å¤modalå¯¹è¯æ¡†ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼Œæ·»åŠ !importantè¦†ç›–documents.cssçš„æ ·å¼
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤12ï¼šç±»åé‡å‘½å
```
fix: é‡å‘½åmodalç±»åé¿å…ä¸documents.csså†²çªï¼Œç§»é™¤!important
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-evaluation.css

### æäº¤13ï¼šCSSæ–‡ä»¶å¯¹åº”å…³ç³»
```
docs: æ·»åŠ CSSæ–‡ä»¶ä¸æ¨¡å—å¯¹åº”å…³ç³»åˆ°CLAUDE.md
```
**æ–‡ä»¶**ï¼š
- CLAUDE.md

### æäº¤14ï¼šé…ç½®ç®¡ç†ç•Œé¢
```
feat: å®Œæˆä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿé˜¶æ®µå›› - é…ç½®ç®¡ç†ç•Œé¢
```
**æ–‡ä»¶**ï¼š
- public/index.html
- public/css/modules/performance-config.css
- public/js/modules/performance-config.js
- public/js/modules/performance.js

### æäº¤15ï¼šBugä¿®å¤å’Œä¼˜åŒ–
```
fix: ä¿®å¤API URLé”™è¯¯ã€NaNé”™è¯¯ã€ç»§ç»­è¯„ä»·åŠŸèƒ½ç­‰9ä¸ªbug
```
**æ–‡ä»¶**ï¼š
- public/js/modules/performance-config.js
- public/js/modules/performance.js
- server/routes/evaluations.js
- server/services/performance-evaluation-service.js
- server/index.js
- docs/development-logs/013 ä¾›åº”å•†æœˆåº¦è¯„ä»·ç³»ç»Ÿå¼€å‘è®°å½•.md

---

## å¼€å‘è€…å¤‡æ³¨

- å¼€å‘è¿‡ç¨‹ä¸­ä¸¥æ ¼éµå¾ªCLAUDE.mdçš„CSSæ¶æ„å¥åº·ç»´æŠ¤åŸåˆ™
- æ‰€æœ‰å‘½åéƒ½ç»è¿‡ä»”ç»†è€ƒè™‘ï¼Œé¿å…ä¸ç°æœ‰æ¨¡å—å†²çª
- ä»£ç æ³¨é‡Šå®Œå–„ï¼Œä¾¿äºåç»­ç»´æŠ¤
- é”™è¯¯å¤„ç†å®Œæ•´ï¼Œæå‡ç³»ç»Ÿå¥å£®æ€§
- è®¤è¯æœºåˆ¶å®Œå–„ï¼Œç¡®ä¿APIå®‰å…¨
- ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œç®€åŒ–æ“ä½œæµç¨‹
- æ¨¡å—åŒ–æ¶æ„æ¸…æ™°ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤\

---

## ´ı½â¾öÎÊÌâ£ºÍâ¹ºÓëÍâĞ­¹©Ó¦ÉÌÇø·Ö

### ÎÊÌâ±³¾°

ÔÚ¿ª·¢¹©Ó¦ÉÌÔÂ¶ÈÆÀ¼ÛÏµÍ³¹ı³ÌÖĞ£¬·¢ÏÖÁËÒ»¸öÏµÍ³ĞÔµÄ¼Ü¹¹ÎÊÌâ£º

#### 1. IQCÖÊÁ¿·ÖÎöÄ£¿é£¨ÒÑÇø·Ö£©
- Êı¾İÔ´£ºÁ½¸öExcelÎÄ¼ş
  - \IQCÀ´ÁÏ¼ìÑéÌ¨ÕË£¨Íâ¹º£©.xlsx\£¨data_type: purchase£©
  - \IQCÀ´ÁÏ¼ìÑéÌ¨ÕË£¨ÍâĞ­£©.xlsx.xlsx\£¨data_type: external£©
- **ÒÑ¾­Çø·ÖÁËÍâ¹ººÍÍâĞ­**

#### 2. ¹©Ó¦ÉÌÅäÖÃÖĞĞÄ£¨Î´Çø·Ö£©
- Ã¿¸ö¹©Ó¦ÉÌÖ»ÓĞÒ»Ìõ¼ÇÂ¼
- \data_type\ ×Ö¶ÎÊÇ \undefined\`n- ¹²ÓĞ70¸ö²»Í¬µÄ¹©Ó¦ÉÌ
- **Ã»ÓĞÇø·ÖÍâ¹ººÍÍâĞ­**

#### 3. ¹©Ó¦ÉÌÔÂ¶È¼¨Ğ§ÆÀ¼ÛÄ£¿é£¨¿ª·¢ÖĞ£©
- ĞèÒª´ÓIQCÊı¾İÌáÈ¡ÖÊÁ¿Êı¾İ
- ĞèÒªÆÀ¼Û¹©Ó¦ÉÌ
- **ÃæÁÙÈçºÎÇø·ÖÍâ¹ººÍÍâĞ­µÄÎÊÌâ**

### ÎÊÌâ·ÖÎö

#### ºËĞÄÃ¬¶Ü
1. **Êı¾İ²»Ò»ÖÂĞÔ**£º
   - IQCÊı¾İÒÑ¾­Çø·ÖÁËÍâ¹ººÍÍâĞ­
   - ¹©Ó¦ÉÌÅäÖÃÖĞĞÄÃ»ÓĞÇø·Ö
   - µ¼ÖÂÊı¾İÌáÈ¡²»×¼È·

2. **ÏÔÊ¾ÎÊÌâ**£º
   - Èç¹ûÇø·ÖÍâ¹ººÍÍâĞ­£¬Í¬Ò»¹©Ó¦ÉÌ»áÏÔÊ¾Á½¸ö¿¨Æ¬
   - ÀıÈç£º³£ĞË£¨Íâ¹º£©ºÍ³£ĞË£¨ÍâĞ­£©
   - ¶ÔÓÚÖ»ÓĞÒ»ÖÖÀàĞÍµÄÓÃ»§£¬¿ÉÄÜÏÔÊ¾²»¹»ÃÀ¹Û

3. **Í¨ÓÃĞÔÎÊÌâ**£º
   - Èç¹ûÇ¿ÖÆÇø·Ö£¬¶ÔÓÚÖ»ÓĞÒ»Àà¹©Ó¦ÉÌµÄÓÃ»§¿ÉÄÜ²»ÊÊÓÃ
   - Èç¹û²»Çø·Ö£¬¶ÔÓÚÓĞÁ½Àà¹©Ó¦ÉÌµÄÓÃ»§Êı¾İ²»×¼È·

4. **Ó°Ïì·¶Î§**£º
   - ¹©Ó¦ÉÌÅäÖÃÖĞĞÄ
   - IQCÖÊÁ¿·ÖÎö
   - ¹©Ó¦ÉÌÔÂ¶È¼¨Ğ§ÆÀ¼Û
   - ¹©Ó¦ÉÌ×ÊÁÏ¹ÜÀí
   - Î´À´ËùÓĞÊ¹ÓÃ¹©Ó¦ÉÌÊı¾İµÄÄ£¿é

### ½â¾ö·½°¸

#### ·½°¸Ñ¡Ôñ£ºÇø·ÖÍâ¹ººÍÍâĞ­£¨ÍÆ¼ö£©

**ºËĞÄË¼Â·**£º
- ¹©Ó¦ÉÌÅäÖÃÖĞĞÄÌí¼Ó \data_type\ ×Ö¶Î
- Èç¹ûÒ»¸ö¹©Ó¦ÉÌ¼ÈÓĞÍâ¹ºÓÖÓĞÍâĞ­£¬´´½¨Á½Ìõ¼ÇÂ¼
- Èç¹ûÖ»ÓĞÒ»¸ö·ÖÀà£¬´´½¨Ò»Ìõ¼ÇÂ¼
- ÏÔÊ¾Ê±ÖÇÄÜÅĞ¶Ï£ºµ¥Ò»ÀàĞÍ²»ÏÔÊ¾·ÖÀà±êÊ¶

**ÊµÊ©²½Öè**£º

1. **ĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄ**
   - Ìí¼Ó \data_type\ ×Ö¶Î£¨purchase/external£©
   - ÔÊĞíÍ¬Ò»¹©Ó¦ÉÌ´´½¨¶àÌõ¼ÇÂ¼£¨²»Í¬data_type£©
   - Ìí¼Ódata_typeÑ¡ÔñÆ÷
   - ÏÔÊ¾Ê±ÖÇÄÜÅĞ¶Ï£¨µ¥Ò»ÀàĞÍ²»ÏÔÊ¾·ÖÀà±êÊ¶£©

2. **ĞŞ¸ÄIQCÊı¾İÌáÈ¡Âß¼­**
   - ¸ù¾İ¹©Ó¦ÉÌÅäÖÃÖĞĞÄµÄdata_typeÌáÈ¡¶ÔÓ¦µÄÊı¾İ

3. **ÏÔÊ¾Âß¼­ÓÅ»¯**
   - ÖÇÄÜÅĞ¶ÏÊÇ·ñÏÔÊ¾·ÖÀà±êÊ¶
   - µ¥Ò»ÀàĞÍ²»ÏÔÊ¾·ÖÀà±êÊ¶
   - ¶àÌõ¼ÇÂ¼ÏÔÊ¾·ÖÀà±êÊ¶

**ÓÅµã**£º
- ? ÓëIQCÊı¾İ½á¹¹¶ÔÓ¦
- ? Êı¾İ×¼È·
- ? ÊÊÓ¦ËùÓĞ³¡¾°
- ? ÏÔÊ¾ÃÀ¹Û£¨ÖÇÄÜÓÅ»¯£©
- ? ºóĞø³É±¾µÍ

**È±µã**£º
- ? ĞèÒªĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄ
- ? ĞèÒªÊı¾İÇ¨ÒÆ

### ÊµÊ©¼Æ»®

#### ½×¶Î1£º¹©Ó¦ÉÌÅäÖÃÖĞĞÄÇø·Ö£¨µ±Ç°ÈÎÎñ£©

**ÈÎÎñ1.1£ºĞŞ¸ÄÊı¾İ¿â**
- [ ] Ìí¼Ó \data_type\ ×Ö¶Îµ½ \endor_configs\ ±í
- [ ] Êı¾İÀàĞÍ£ºENUM('purchase', 'external')
- [ ] Ä¬ÈÏÖµ£º'purchase'
- [ ] ÎªÏÖÓĞ¼ÇÂ¼ÉèÖÃÄ¬ÈÏÖµ

**ÈÎÎñ1.2£ºĞŞ¸ÄVendorConfigÄ£ĞÍ**
- [ ] ¸üĞÂ \server/models/VendorConfig.js\`n- [ ] Ìí¼Ó \data_type\ ×Ö¶Î¶¨Òå

**ÈÎÎñ1.3£ºĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄÇ°¶Ë**
- [ ] Ìí¼Ódata_typeÑ¡ÔñÆ÷£¨Íâ¹º/ÍâĞ­£©
- [ ] ĞŞ¸Ä´´½¨¹©Ó¦ÉÌÂß¼­
- [ ] ĞŞ¸Ä±à¼­¹©Ó¦ÉÌÂß¼­
- [ ] Ìí¼Ódata_typeÏÔÊ¾

**ÈÎÎñ1.4£ºĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄºó¶Ë**
- [ ] ¸üĞÂ´´½¨¹©Ó¦ÉÌAPI
- [ ] ¸üĞÂ±à¼­¹©Ó¦ÉÌAPI
- [ ] ¸üĞÂ²éÑ¯¹©Ó¦ÉÌAPI
- [ ] ÔÊĞíÍ¬Ò»¹©Ó¦ÉÌ´´½¨¶àÌõ¼ÇÂ¼£¨²»Í¬data_type£©

**ÈÎÎñ1.5£ºÊı¾İÇ¨ÒÆ**
- [ ] ´´½¨Êı¾İÇ¨ÒÆ½Å±¾
- [ ] ÎªÏÖÓĞ¹©Ó¦ÉÌ¼ÇÂ¼ÉèÖÃdata_type
- [ ] ²âÊÔÊı¾İÇ¨ÒÆ

**ÈÎÎñ1.6£ºÏÔÊ¾Âß¼­ÓÅ»¯**
- [ ] ÊµÏÖÖÇÄÜÏÔÊ¾Âß¼­
- [ ] µ¥Ò»ÀàĞÍ²»ÏÔÊ¾·ÖÀà±êÊ¶
- [ ] ¶àÌõ¼ÇÂ¼ÏÔÊ¾·ÖÀà±êÊ¶

**Ô¤¼ÆÊ±¼ä**£º2-3Ğ¡Ê±

#### ½×¶Î2£ºĞŞ¸ÄIQCÊı¾İÌáÈ¡Âß¼­

**ÈÎÎñ2.1£ºĞŞ¸ÄÖÊÁ¿Êı¾İÌáÈ¡·şÎñ**
- [ ] ĞŞ¸Ä \extractQualityData\ ·½·¨
- [ ] Ìí¼Ó \dataType\ ²ÎÊı
- [ ] ¸ù¾İdataType¹ıÂËIQCÊı¾İ
- [ ] Ö»ÌáÈ¡¶ÔÓ¦ÀàĞÍµÄÊı¾İ

**ÈÎÎñ2.2£ºĞŞ¸Ä¼¨Ğ§ÆÀ¼Û·şÎñ**
- [ ] ĞŞ¸Ä \startEvaluation\ ·½·¨
- [ ] ¸ù¾İ¹©Ó¦ÉÌµÄdata_typeÌáÈ¡¶ÔÓ¦µÄÖÊÁ¿Êı¾İ
- [ ] ¸üĞÂÆÀ¼ÛÊµÌåÁĞ±í

**ÈÎÎñ2.3£º²âÊÔ**
- [ ] ²âÊÔÍâ¹º¹©Ó¦ÉÌµÄÊı¾İÌáÈ¡
- [ ] ²âÊÔÍâĞ­¹©Ó¦ÉÌµÄÊı¾İÌáÈ¡
- [ ] ²âÊÔ»ìºÏÀàĞÍ¹©Ó¦ÉÌµÄÊı¾İÌáÈ¡

**Ô¤¼ÆÊ±¼ä**£º1-2Ğ¡Ê±

#### ½×¶Î3£ºĞŞ¸Ä¼¨Ğ§ÆÀ¼ÛÄ£¿é

**ÈÎÎñ3.1£ºĞŞ¸ÄÆÀ¼ÛÊµÌåÁĞ±í**
- [ ] ¸ù¾İ¹©Ó¦ÉÌµÄdata_typeÉú³ÉÆÀ¼ÛÊµÌå
- [ ] ÏÔÊ¾Ãû³ÆÖÇÄÜÅĞ¶Ï
- [ ] ¶àÌõ¼ÇÂ¼ÏÔÊ¾·ÖÀà±êÊ¶

**ÈÎÎñ3.2£ºĞŞ¸Ä¿¨Æ¬ÏÔÊ¾**
- [ ] ÏÔÊ¾Ãû³ÆÊ¹ÓÃÖÇÄÜÅĞ¶ÏÂß¼­
- [ ] È·±£ÏÔÊ¾ÃÀ¹Û

**ÈÎÎñ3.3£º²âÊÔ**
- [ ] ²âÊÔÍâ¹º¹©Ó¦ÉÌµÄÆÀ¼Û
- [ ] ²âÊÔÍâĞ­¹©Ó¦ÉÌµÄÆÀ¼Û
- [ ] ²âÊÔ»ìºÏÀàĞÍ¹©Ó¦ÉÌµÄÆÀ¼Û

**Ô¤¼ÆÊ±¼ä**£º1Ğ¡Ê±

#### ½×¶Î4£ºĞŞ¸ÄÆäËûÄ£¿é£¨¿ÉÑ¡£©

**ÈÎÎñ4.1£ºIQCÖÊÁ¿·ÖÎö**
- [ ] È·±£IQCÖÊÁ¿·ÖÎöÕıÈ·ÏÔÊ¾data_type
- [ ] ²âÊÔÍâ¹ººÍÍâĞ­µÄÊı¾İÏÔÊ¾

**ÈÎÎñ4.2£º¹©Ó¦ÉÌ×ÊÁÏ¹ÜÀí**
- [ ] È·±£×ÊÁÏ¹ÜÀíÕıÈ·´¦Àídata_type
- [ ] ²âÊÔÍâ¹ººÍÍâĞ­µÄ×ÊÁÏ¹ÜÀí

**Ô¤¼ÆÊ±¼ä**£º1-2Ğ¡Ê±

### ¾ö²ß¼ÇÂ¼

**¾ö²ßÊ±¼ä**£º2026-01-15

**¾ö²ßÄÚÈİ**£º
- ¾ö¶¨ÔÚ¹©Ó¦ÉÌÅäÖÃÖĞĞÄÇø·ÖÍâ¹ººÍÍâĞ­
- ²ÉÓÃÖÇÄÜÏÔÊ¾Âß¼­£¬µ¥Ò»ÀàĞÍ²»ÏÔÊ¾·ÖÀà±êÊ¶
- ÏÈÍê³É¹©Ó¦ÉÌÅäÖÃÖĞĞÄµÄÇø·Ö£¬ÔÙ¼ÌĞø¿ª·¢¼¨Ğ§ÆÀ¼ÛÄ£¿é

**¾ö²ßÀíÓÉ**£º
1. Êı¾İ×¼È·ĞÔÓÅÏÈ
2. ±ÜÃâºóĞøÖØ¹¹³É±¾
3. Ò»´Îµ½Î»£¬ÊÊÓ¦ËùÓĞ³¡¾°
4. ÏÔÊ¾ÃÀ¹ÛÍ¨¹ıÖÇÄÜÓÅ»¯½â¾ö

**¾ö²ßÓ°Ïì**£º
- ĞèÒªĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄ
- ĞèÒªĞŞ¸ÄIQCÊı¾İÌáÈ¡Âß¼­
- ĞèÒªĞŞ¸Ä¼¨Ğ§ÆÀ¼ÛÄ£¿é
- Ô¤¼Æ×ÜÊ±¼ä£º4-6Ğ¡Ê±

### ´ı°ìÊÂÏî

- [ ] ½×¶Î1£º¹©Ó¦ÉÌÅäÖÃÖĞĞÄÇø·Ö
  - [ ] ÈÎÎñ1.1£ºĞŞ¸ÄÊı¾İ¿â
  - [ ] ÈÎÎñ1.2£ºĞŞ¸ÄVendorConfigÄ£ĞÍ
  - [ ] ÈÎÎñ1.3£ºĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄÇ°¶Ë
  - [ ] ÈÎÎñ1.4£ºĞŞ¸Ä¹©Ó¦ÉÌÅäÖÃÖĞĞÄºó¶Ë
  - [ ] ÈÎÎñ1.5£ºÊı¾İÇ¨ÒÆ
  - [ ] ÈÎÎñ1.6£ºÏÔÊ¾Âß¼­ÓÅ»¯
- [ ] ½×¶Î2£ºĞŞ¸ÄIQCÊı¾İÌáÈ¡Âß¼­
  - [ ] ÈÎÎñ2.1£ºĞŞ¸ÄÖÊÁ¿Êı¾İÌáÈ¡·şÎñ
  - [ ] ÈÎÎñ2.2£ºĞŞ¸Ä¼¨Ğ§ÆÀ¼Û·şÎñ
  - [ ] ÈÎÎñ2.3£º²âÊÔ
- [ ] ½×¶Î3£ºĞŞ¸Ä¼¨Ğ§ÆÀ¼ÛÄ£¿é
  - [ ] ÈÎÎñ3.1£ºĞŞ¸ÄÆÀ¼ÛÊµÌåÁĞ±í
  - [ ] ÈÎÎñ3.2£ºĞŞ¸Ä¿¨Æ¬ÏÔÊ¾
  - [ ] ÈÎÎñ3.3£º²âÊÔ
- [ ] ½×¶Î4£ºĞŞ¸ÄÆäËûÄ£¿é£¨¿ÉÑ¡£©
  - [ ] ÈÎÎñ4.1£ºIQCÖÊÁ¿·ÖÎö
  - [ ] ÈÎÎñ4.2£º¹©Ó¦ÉÌ×ÊÁÏ¹ÜÀí

### ²Î¿¼×ÊÁÏ

- **IQCÊı¾İ½á¹¹**£º
  - \IQCÀ´ÁÏ¼ìÑéÌ¨ÕË£¨Íâ¹º£©.xlsx\£¨data_type: purchase£©
  - \IQCÀ´ÁÏ¼ìÑéÌ¨ÕË£¨ÍâĞ­£©.xlsx.xlsx\£¨data_type: external£©

- **¹©Ó¦ÉÌÅäÖÃÖĞĞÄ**£º
  - µ±Ç°£º70¸ö¹©Ó¦ÉÌ£¬Ã¿¸ö¹©Ó¦ÉÌÒ»Ìõ¼ÇÂ¼£¬data_typeÎªundefined
  - Ä¿±ê£ºÖ§³Ödata_type×Ö¶Î£¬ÔÊĞíÍ¬Ò»¹©Ó¦ÉÌ´´½¨¶àÌõ¼ÇÂ¼

- **²âÊÔÊı¾İ**£º
  - ³£ĞË£ºÍâ¹º6Åú´Î£¨5ºÏ¸ñ£©£¬ÍâĞ­3Åú´Î£¨3ºÏ¸ñ£©
  - Ğñº½£ºÍâ¹º19Åú´Î£¨18ºÏ¸ñ£©
  - É­ÓÀ£ºÍâ¹º5Åú´Î£¨3ºÏ¸ñ£©

### ¸üĞÂÈÕÖ¾

**2026-01-15**£º
- ¼ÇÂ¼Íâ¹ºÓëÍâĞ­¹©Ó¦ÉÌÇø·ÖÎÊÌâ
- ÖÆ¶¨½â¾ö·½°¸ºÍÊµÊ©¼Æ»®
- ¾ö¶¨ÏÈÍê³É¹©Ó¦ÉÌÅäÖÃÖĞĞÄÇø·Ö£¬ÔÙ¼ÌĞø¿ª·¢¼¨Ğ§ÆÀ¼ÛÄ£¿é\
