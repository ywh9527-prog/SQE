# 月度绩效评价模块需求讨论

## 概述
月度绩效评价模块是 SQE 质量管理平台的核心功能之一，用于对供应商进行月度绩效评价和管理。

## 核心需求

### 1. 功能定位
月度绩效评价有两个核心场景：
- **评价时刻**：每月某个固定时间点，SQE 主动创建月度评价
- **查看时刻**：日常随时查看供应商的历史绩效表现

**关键区别**：
- 评价 = 创造数据（每月一次）
- 查看 = 消费数据（随时查看）

### 2. 评价方式
采用**表单式评价**：
- 打开评价页面，看到所有供应商列表
- 点击某个供应商，弹出评分表单
- 批量评价多个供应商

### 3. 评价维度配置

#### 3.1 默认评价维度
- **质量（40%）**：基于 IQC 检验数据自动计算
- **使用情况（30%）**：来料上线使用情况、下游客户投诉，手动录入
- **交期（15%）**：手动录入
- **服务（15%）**：手动录入

#### 3.2 配置方式
- 支持自定义评价维度和权重
- 每家公司可以根据自己的需求调整
- 配置位置：供应商配置中心

### 4. 质量得分计算规则

#### 4.1 数据来源
- 基于 IQC 检验数据自动计算
- 显示计算过程，透明化

#### 4.2 计算规则（可配置）
默认规则：
- **优秀**：≥ 95分
- **合格**：≥ 85分 且 < 95分
- **整改后合格**：≥ 75分 且 < 85分
- **不合格**：< 70分

#### 4.3 规则配置
- 支持自定义区间和分数
- 可以添加/删除/修改区间

### 5. 评分表单内容

#### 5.1 表单结构
采用**详细版**评分表单：

```
评分表单包含：
1. IQC 检验数据显示（自动计算质量得分）
2. 评分规则说明（每个维度都要显示）
3. 使用情况（手动输入 + 详细说明）
4. 交期（手动输入 + 详细说明）
5. 服务（手动输入 + 详细说明）
6. 显示总分和评级
7. 评价备注/说明
8. 提交按钮
```

#### 5.2 评分规则说明示例
- 质量得分：当月合格批次 ÷ 当月总批次 × 100% × 权重
- 使用情况：手动评分 × 权重
- 交期：手动评分 × 权重
- 服务：手动评分 × 权重

### 6. 使用情况数据来源
- **手动录入，手动计算**
- SQE 人员手动填写下游客户投诉情况
- 根据投诉次数或严重程度打分

### 7. 绩效仪表盘设计

#### 7.1 页面结构
采用**供应商绩效仪表盘**：
- **顶部统计卡片**：
  - 本月评价数量
  - 平均分
  - 优秀供应商数量
- **中间图表**：
  - 月度趋势图
  - 供应商排名图
- **底部列表**：
  - 供应商绩效明细
  - 支持点击查看详情

#### 7.2 绩效详情
- 历史绩效趋势图
- 各维度得分详情
- 历次评价记录
- 支持切换月份查看

### 8. 权限控制
- 每个公司的某一个 SQE 单独使用
- 无需复杂的权限控制

### 9. 提醒功能
- 提醒功能放到整个 SQE 管理系统的主页
- 月度绩效评价模块先不考虑提醒功能

### 10. 导出功能
- 先不考虑导出功能

### 11. 评价记录管理
- 允许修改已提交的评价
- 允许删除已提交的评价
- 记录修改历史（谁、何时、修改了什么）

### 12. 评级标准
**待确认**：用户提出按照他说的来，但具体标准需要进一步确认。

## 设计方案

### 1. 页面结构设计

#### 1.1 双模式切换
月度绩效评价设计为两个可切换的视图：

**模式 A：绩效仪表盘（默认视图）**
- 顶部：统计卡片 + 月份选择器
- 中部：图表区域（左右布局）
  - 左侧：月度趋势图（折线图）
  - 右侧：供应商排名图（柱状图）
- 底部：供应商列表（表格形式）
  - 显示：供应商名称、最新评分、评级、趋势箭头
  - 操作：点击查看详情、点击评价

**模式 B：评价工作台**
- 左侧：供应商列表（显示评价状态）
  - 未评价（红色标记）
  - 已评价（绿色标记）
- 右侧：评分表单（动态加载）
  - 顶部：供应商基本信息 + 月份选择
  - 中部：评分维度（卡片式布局）
  - 底部：总分显示 + 提交按钮

**切换按钮**：页面右上角两个按钮"查看绩效"和"开始评价"

### 2. 评分表单设计

#### 2.1 卡片式布局
每个评分维度一个卡片，清晰易读：

**质量得分卡片（40%）**
- 显示评分规则
- 显示 IQC 检验数据
- 显示计算过程
- 显示最终得分

**使用情况卡片（30%）**
- 显示评分规则
- 得分输入框（0-100）
- 详细说明文本框

**交期卡片（15%）**
- 显示评分规则
- 得分输入框（0-100）
- 详细说明文本框

**服务卡片（15%）**
- 显示评分规则
- 得分输入框（0-100）
- 详细说明文本框

### 3. 评价流程

采用**引导式评价流程**：

```
步骤 1：选择月份
  [ 2026年1月 ▼ ]  [ 下一步 ]

步骤 2：选择供应商
  [ 全部供应商 ▼ ]  [ 仅显示未评价供应商 ]
  列表：供应商A ✓  供应商B ✓  供应商C ✗
  [ 下一步 ]

步骤 3：逐个评价
  供应商A → 填写评分 → 提交
  供应商B → 填写评分 → 提交
  供应商C → 填写评分 → 提交
  [ 完成评价 ]

步骤 4：评价完成
  已评价 3 个供应商
  平均分：85.6 分
  [ 查看绩效报告 ]
```

### 4. 数据可视化

#### 4.1 图表类型
- **月度趋势图**：折线图，X轴月份，Y轴分数
- **供应商排名图**：横向柱状图，X轴分数，Y轴供应商名称
- **维度得分雷达图**：详情页显示各维度得分

#### 4.2 图表库
推荐使用 **ECharts**（功能强大，中文文档完善）

### 5. 配置管理

#### 5.1 配置位置
在供应商配置中心新增"绩效配置"标签页

#### 5.2 配置内容
- 评价维度配置（维度名称、权重、数据来源）
- 质量得分计算规则配置（等级、分数范围、说明）

### 6. 技术实现建议

#### 6.1 前端架构
- 使用现有的三层架构（控制层、服务层、UI工具层）
- 保持与系统现有风格一致

#### 6.2 数据存储
- 新增 `performance_evaluations` 表
- 存储评价记录和维度得分

#### 6.3 图表库
- ECharts

## 讨论记录

### 问题 1：月度绩效评价的主要目标是什么？
**用户选择**：A. 质量评分系统 + B. 绩效排名管理 + C. 综合管理平台都需要

### 问题 2：评价流程的具体操作方式？
**用户选择**：A. 表单式评价
- 打开评价页面，看到所有供应商列表
- 点击某个供应商，弹出评分表单
- 质量得分自动计算（基于 IQC 检验数据）
- 分值和计算规则需要自定义配置
- 评分维度需要自定义配置

### 问题 3：评价维度的配置方式？
**用户回答**：每家公司自己定义，默认设置为质量（40%）、使用情况（30%）、交期（15%）、服务（15%）

### 问题 4：质量得分的计算规则？
**用户选择**：B. 可配置规则
- 优秀：≥ 95分
- 合格：≥ 85分 且 < 95分
- 整改后合格：≥ 75分 且 < 85分
- 不合格：< 70分

### 问题 5：使用情况（下游客户投诉）的数据来源？
**用户选择**：手动录入，手动计算

### 问题 6：评价表单的具体内容？
**用户选择**：B. 详细版
- 显示 IQC 检验数据（自动计算质量得分）
- 使用情况（手动输入 + 详细说明）
- 交期（手动输入 + 详细说明）
- 服务（手动输入 + 详细说明）
- 显示总分和评级
- 评价备注/说明
- 提交按钮

**补充**：每个维度都需要显示评分规则说明

### 问题 7：查看绩效表现的页面设计？
**用户选择**：B. 供应商绩效仪表盘
- 顶部统计卡片：本月评价数量、平均分、优秀供应商数量
- 中间图表：月度趋势图、供应商排名图
- 底部列表：供应商绩效明细
- 支持点击查看详情

### 问题 8：绩效评价的权限控制？
**用户回答**：这个软件只是每个公司的某一个 SQE 使用

### 问题 9：绩效评价的提醒功能？
**用户回答**：提醒功能可以放到整个 SQE 管理系统的主页，这一部分可以不用记

### 问题 10：评价数据的导出功能？
**用户回答**：先不考虑导出

### 问题 11：评价的修改和删除？
**用户回答**：可以删除修改

### 问题 12：评级标准？
**用户回答**：按照我说的来（具体标准待确认）

## 待确认事项

1. **评级标准**：用户提出按照他说的来，但具体标准需要进一步确认
2. **评价维度**：除了默认的4个维度，是否需要支持添加更多维度？
3. **图表类型**：是否需要其他类型的图表（如饼图、散点图等）？
4. **评价流程**：引导式评价流程是否需要调整？

## 后续步骤

1. 确认待确认事项
2. 编写详细实施计划（使用 `/plan` 命令）
3. 使用测试驱动开发实施功能（使用 `/tdd` 命令）
4. 调试问题（使用 `/debug` 命令）
5. 代码审查（使用 `/code-review` 命令）
6. 验证完成（使用 `/verify` 命令）

## 文档信息

- 创建日期：2026-01-14
- 创建人：iFlow CLI
- 文档版本：v1.0
- 相关模块：月度绩效评价模块