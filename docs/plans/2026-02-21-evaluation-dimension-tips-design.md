# 供应商评价维度提示功能设计文档

## 需求概述

在评价配置中加入可自定义的文字提示（计算规则和评分标准），在评价弹窗中显示，方便评价人员参考如何打分。

## 详细设计

### 1. 配置数据结构

在 `dimensions` 数组中增加两个字段：

| 字段 | 类型 | 说明 |
|:---|:---|:---|
| calculationRule | String | 计算规则 |
| scoringStandard | String | 评分标准 |

### 2. 默认配置预设

使用供应商考核表的内容作为默认值：

| 维度 | 计算规则 | 评分标准 |
|:---|:---|:---|
| 质量 | 合格批次量 / 到货批次量 × 100% | 当月合格批次/当月交付总批次×100%×权重 |
| 使用情况 | 来料上线使用情况、下游客户端投诉 | 现场反馈性能/尺寸类-10分，外观类-5分，客诉一次-15分 |
| 服务 | 供应商评价期间业务、协作、共同提升、配合度考核 | 异常反馈等事项每次未及时响应扣4分；当月仅发生一次事项未及时响应扣10分，仅两次的每次扣5分 |
| 交付 | 按时按量到货批次量 / 到货批次量 × 100% | 按时按量批次交付率低于100%每1%扣2分，不满1%按1%计算 |

### 3. 配置界面

在现有维度编辑行中增加两个输入框：
- 维度名称 | 键值 | 权重 | 计算规则 | 评分标准 | 删除

### 4. 评价弹窗

在每个维度卡片内显示：
```
[维度名称] [权重]
[滑块/输入框]
---
计算规则: xxx
评分标准: xxx
```

### 5. 快照逻辑

与现有逻辑完全一致：
- **创建评价周期时**：将当前配置（含计算规则和评分标准）存入 `config_snapshot`
- **进行中评价**：读取实时配置，修改配置会立即生效
- **已完成后评价**：读取历史快照，保留当时的文字

## 涉及文件

1. `server/services/evaluation-config-service.js` - 默认配置
2. `data/evaluation-config.json` - 配置文件
3. `public/js/modules/performance-config.js` - 配置界面
4. `public/js/modules/performance.js` - 评价弹窗
5. `public/index.html` - 配置界面HTML

## 实施顺序

1. 修改默认配置结构
2. 修改配置界面（添加输入框）
3. 修改评价弹窗（显示提示文字）
4. 测试验证
