# 供应商评价等级策略功能设计文档

## 需求概述

在评价配置中加入可自定义的等级策略（处理措施），在评价详情弹窗中显示，方便评价人员了解不同等级的处理方式。

## 详细设计

### 1. 配置数据结构

在 `gradeRules` 数组中增加 `strategy` 字段：

| 字段 | 类型 | 说明 |
|:---|:---|:---|
| strategy | String | 等级策略/处理措施 |

### 2. 默认配置预设

使用供应商考核表的内容作为默认值：

| 等级 | 分数 | 策略 |
|:---|:---|:---|
| 优秀 | ≥95分 | 同等条件优先采购 |
| 合格 | 85-94分 | 可保持正常采购，要求供应商自身内部改善 |
| 整改后合格 | 70-84分 | 可保持正常采购，要求供应商提供8D改善报告，若连续发生重复性问题（≥2次）则列入不合格管理 |
| 不合格 | <70分 | 暂停开发新产品，要求1周内提交改进计划，1个月内完成改进；若连续三个月不合格则暂停供货；6个月内未达到解除条件则剔除出合格供应商目录 |

### 3. 配置界面

在现有等级规则编辑行中增加策略输入框（放在最高分后面）：
- 等级名称 | 最低分 | 最高分 | 策略 | 删除

### 4. 评价详情弹窗

在显示等级时，显示所有等级的策略，效果类似：
```
等级: 合格
---
优秀(≥95分): 同等条件优先采购
合格(85-94分): 可保持正常采购，要求供应商自身内部改善
整改后合格(70-84分): 可保持正常采购，要求供应商提供8D改善报告...
不合格(<70分): 暂停开发新产品...
```

### 5. 快照逻辑

与现有逻辑完全一致：
- **创建评价周期时**：将当前配置（含等级策略）存入 `config_snapshot`
- **进行中评价**：读取实时配置，修改配置会立即生效
- **已完成后评价**：读取历史快照，保留当时的策略

## 涉及文件

1. `server/services/evaluation-config-service.js` - 默认配置
2. `data/evaluation-config.json` - 配置文件
3. `public/js/modules/performance-config.js` - 配置界面
4. `public/js/modules/performance.js` - 评价详情弹窗

## 实施顺序

1. 修改默认配置结构，添加 strategy 字段
2. 修改配置界面，添加等级策略输入框
3. 修改评价详情弹窗，显示等级策略
4. 测试验证
